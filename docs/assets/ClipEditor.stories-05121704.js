import{T as pa,w as Qc,i as Kc,s as el,x as tl,b as $e}from"./lit-element-f39d4945.js";import{d as j,n as O,r as vn,t as rl}from"./index-999147a9.js";import{f as al}from"./directive-helpers-0809fd4c.js";import{c as nl,g as il}from"./_commonjsHelpers-725317a4.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pn={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},gn=c=>(...n)=>({_$litDirective$:c,values:n});let bn=class{constructor(n){}get _$AU(){return this._$AM._$AU}_$AT(n,h,f){this._$Ct=n,this._$AM=h,this._$Ci=f}_$AS(n,h){return this.update(n,h)}update(n,h){return this.render(...h)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ee=(c,n)=>{var f;const h=c._$AN;if(h===void 0)return!1;for(const _ of h)(f=_._$AO)==null||f.call(_,n,!1),Ee(_,n);return!0},nt=c=>{let n,h;do{if((n=c._$AM)===void 0)break;h=n._$AN,h.delete(c),c=n}while((h==null?void 0:h.size)===0)},mn=c=>{for(let n;n=c._$AM;c=n){let h=n._$AN;if(h===void 0)n._$AN=h=new Set;else if(h.has(c))break;h.add(c),cl(n)}};function ol(c){this._$AN!==void 0?(nt(this),this._$AM=c,mn(this)):this._$AM=c}function sl(c,n=!1,h=0){const f=this._$AH,_=this._$AN;if(_!==void 0&&_.size!==0)if(n)if(Array.isArray(f))for(let k=h;k<f.length;k++)Ee(f[k],!1),nt(f[k]);else f!=null&&(Ee(f,!1),nt(f));else Ee(this,c)}const cl=c=>{c.type==pn.CHILD&&(c._$AP??(c._$AP=sl),c._$AQ??(c._$AQ=ol))};class ll extends bn{constructor(){super(...arguments),this._$AN=void 0}_$AT(n,h,f){super._$AT(n,h,f),mn(this),this.isConnected=n._$AU}_$AO(n,h=!0){var f,_;n!==this.isConnected&&(this.isConnected=n,n?(f=this.reconnected)==null||f.call(this):(_=this.disconnected)==null||_.call(this)),h&&(Ee(this,n),nt(this))}setValue(n){if(al(this._$Ct))this._$Ct._$AI(n,this);else{const h=[...this._$Ct._$AH];h[this._$Ci]=n,this._$Ct._$AI(h,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hl=()=>new ul;class ul{}const Dt=new WeakMap,fl=gn(class extends ll{render(c){return pa}update(c,[n]){var f;const h=n!==this.G;return h&&this.G!==void 0&&this.ot(void 0),(h||this.rt!==this.lt)&&(this.G=n,this.ct=(f=c.options)==null?void 0:f.host,this.ot(this.lt=c.element)),pa}ot(c){if(typeof this.G=="function"){const n=this.ct??globalThis;let h=Dt.get(n);h===void 0&&(h=new WeakMap,Dt.set(n,h)),h.get(this.G)!==void 0&&this.G.call(this.ct,void 0),h.set(this.G,c),c!==void 0&&this.G.call(this.ct,c)}else this.G.value=c}get rt(){var c,n;return typeof this.G=="function"?(c=Dt.get(this.ct??globalThis))==null?void 0:c.get(this.G):(n=this.G)==null?void 0:n.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yn="important",dl=" !"+yn,vl=gn(class extends bn{constructor(c){var n;if(super(c),c.type!==pn.ATTRIBUTE||c.name!=="style"||((n=c.strings)==null?void 0:n.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(c){return Object.keys(c).reduce((n,h)=>{const f=c[h];return f==null?n:n+`${h=h.includes("-")?h:h.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${f};`},"")}update(c,[n]){const{style:h}=c.element;if(this.ut===void 0)return this.ut=new Set(Object.keys(n)),this.render(n);for(const f of this.ut)n[f]==null&&(this.ut.delete(f),f.includes("-")?h.removeProperty(f):h[f]=null);for(const f in n){const _=n[f];if(_!=null){this.ut.add(f);const k=typeof _=="string"&&_.endsWith(dl);f.includes("-")||k?h.setProperty(f,k?_.slice(0,-11):_,k?yn:""):h[f]=_}}return Qc}});var wn={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(c,n){(function(h,f){c.exports=f()})(nl,function(){for(var h=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e<t?t:e>r?r:e},f=h,_=function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=f(e[t],0,255)):t===3&&(e[t]=f(e[t],0,1));return e},k={},W=0,ne=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];W<ne.length;W+=1){var le=ne[W];k["[object "+le+"]"]=le.toLowerCase()}var Be=function(e){return k[Object.prototype.toString.call(e)]||"object"},_n=Be,Pn=function(e,t){return t===void 0&&(t=null),e.length>=3?Array.prototype.slice.call(e):_n(e[0])=="object"&&t?t.split("").filter(function(r){return e[0][r]!==void 0}).map(function(r){return e[0][r]}):e[0]},kn=Be,$n=function(e){if(e.length<2)return null;var t=e.length-1;return kn(e[t])=="string"?e[t].toLowerCase():null},Ne=Math.PI,b={clip_rgb:_,limit:h,type:Be,unpack:Pn,last:$n,PI:Ne,TWOPI:Ne*2,PITHIRD:Ne/3,DEG2RAD:Ne/180,RAD2DEG:180/Ne},U={format:{},autodetect:[]},Nn=b.last,Mn=b.clip_rgb,Ht=b.type,he=U,zt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var a=this;if(Ht(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var o=Nn(t),s=!1;if(!o){s=!0,he.sorted||(he.autodetect=he.autodetect.sort(function(v,m){return m.p-v.p}),he.sorted=!0);for(var i=0,l=he.autodetect;i<l.length;i+=1){var u=l[i];if(o=u.test.apply(u,t),o)break}}if(he.format[o]){var d=he.format[o].apply(null,s?t:t.slice(0,-1));a._rgb=Mn(d)}else throw new Error("unknown format: "+t);a._rgb.length===3&&a._rgb.push(1)};zt.prototype.toString=function(){return Ht(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var $=zt,Ae=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ae.Color,[null].concat(e)))};Ae.Color=$,Ae.version="2.4.2";var L=Ae,Cn=b.unpack,Rt=Math.max,xn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Cn(e,"rgb"),a=r[0],o=r[1],s=r[2];a=a/255,o=o/255,s=s/255;var i=1-Rt(a,Rt(o,s)),l=i<1?1/(1-i):0,u=(1-a-i)*l,d=(1-o-i)*l,v=(1-s-i)*l;return[u,d,v,i]},En=xn,Bn=b.unpack,An=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Bn(e,"cmyk");var r=e[0],a=e[1],o=e[2],s=e[3],i=e.length>4?e[4]:1;return s===1?[0,0,0,i]:[r>=1?0:255*(1-r)*(1-s),a>=1?0:255*(1-a)*(1-s),o>=1?0:255*(1-o)*(1-s),i]},Sn=An,Fn=L,Lt=$,Gt=U,Tn=b.unpack,Dn=b.type,Hn=En;Lt.prototype.cmyk=function(){return Hn(this._rgb)},Fn.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Lt,[null].concat(e,["cmyk"])))},Gt.format.cmyk=Sn,Gt.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Tn(e,"cmyk"),Dn(e)==="array"&&e.length===4)return"cmyk"}});var zn=b.unpack,Rn=b.last,it=function(e){return Math.round(e*100)/100},Ln=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=zn(e,"hsla"),a=Rn(e)||"lsa";return r[0]=it(r[0]||0),r[1]=it(r[1]*100)+"%",r[2]=it(r[2]*100)+"%",a==="hsla"||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,a="hsla"):r.length=3,a+"("+r.join(",")+")"},Gn=Ln,On=b.unpack,Un=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=On(e,"rgba");var r=e[0],a=e[1],o=e[2];r/=255,a/=255,o/=255;var s=Math.min(r,a,o),i=Math.max(r,a,o),l=(i+s)/2,u,d;return i===s?(u=0,d=Number.NaN):u=l<.5?(i-s)/(i+s):(i-s)/(2-i-s),r==i?d=(a-o)/(i-s):a==i?d=2+(o-r)/(i-s):o==i&&(d=4+(r-a)/(i-s)),d*=60,d<0&&(d+=360),e.length>3&&e[3]!==void 0?[d,u,l,e[3]]:[d,u,l]},Ot=Un,qn=b.unpack,In=b.last,Wn=Gn,Zn=Ot,ot=Math.round,Vn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=qn(e,"rgba"),a=In(e)||"rgb";return a.substr(0,3)=="hsl"?Wn(Zn(r),a):(r[0]=ot(r[0]),r[1]=ot(r[1]),r[2]=ot(r[2]),(a==="rgba"||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,a="rgba"),a+"("+r.slice(0,a==="rgb"?3:4).join(",")+")")},Yn=Vn,jn=b.unpack,st=Math.round,Xn=function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];t=jn(t,"hsl");var a=t[0],o=t[1],s=t[2],i,l,u;if(o===0)i=l=u=s*255;else{var d=[0,0,0],v=[0,0,0],m=s<.5?s*(1+o):s+o-s*o,p=2*s-m,w=a/360;d[0]=w+1/3,d[1]=w,d[2]=w-1/3;for(var y=0;y<3;y++)d[y]<0&&(d[y]+=1),d[y]>1&&(d[y]-=1),6*d[y]<1?v[y]=p+(m-p)*6*d[y]:2*d[y]<1?v[y]=m:3*d[y]<2?v[y]=p+(m-p)*(2/3-d[y])*6:v[y]=p;e=[st(v[0]*255),st(v[1]*255),st(v[2]*255)],i=e[0],l=e[1],u=e[2]}return t.length>3?[i,l,u,t[3]]:[i,l,u,1]},Ut=Xn,qt=Ut,It=U,Wt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Zt=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Vt=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Yt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,jt=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Xt=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Jt=Math.round,Qt=function(e){e=e.toLowerCase().trim();var t;if(It.format.named)try{return It.format.named(e)}catch{}if(t=e.match(Wt)){for(var r=t.slice(1,4),a=0;a<3;a++)r[a]=+r[a];return r[3]=1,r}if(t=e.match(Zt)){for(var o=t.slice(1,5),s=0;s<4;s++)o[s]=+o[s];return o}if(t=e.match(Vt)){for(var i=t.slice(1,4),l=0;l<3;l++)i[l]=Jt(i[l]*2.55);return i[3]=1,i}if(t=e.match(Yt)){for(var u=t.slice(1,5),d=0;d<3;d++)u[d]=Jt(u[d]*2.55);return u[3]=+u[3],u}if(t=e.match(jt)){var v=t.slice(1,4);v[1]*=.01,v[2]*=.01;var m=qt(v);return m[3]=1,m}if(t=e.match(Xt)){var p=t.slice(1,4);p[1]*=.01,p[2]*=.01;var w=qt(p);return w[3]=+t[4],w}};Qt.test=function(e){return Wt.test(e)||Zt.test(e)||Vt.test(e)||Yt.test(e)||jt.test(e)||Xt.test(e)};var Jn=Qt,Qn=L,Kt=$,er=U,Kn=b.type,ei=Yn,tr=Jn;Kt.prototype.css=function(e){return ei(this._rgb,e)},Qn.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Kt,[null].concat(e,["css"])))},er.format.css=tr,er.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&Kn(e)==="string"&&tr.test(e))return"css"}});var rr=$,ti=L,ri=U,ai=b.unpack;ri.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ai(e,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},ti.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(rr,[null].concat(e,["gl"])))},rr.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var ni=b.unpack,ii=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ni(e,"rgb"),a=r[0],o=r[1],s=r[2],i=Math.min(a,o,s),l=Math.max(a,o,s),u=l-i,d=u*100/255,v=i/(255-u)*100,m;return u===0?m=Number.NaN:(a===l&&(m=(o-s)/u),o===l&&(m=2+(s-a)/u),s===l&&(m=4+(a-o)/u),m*=60,m<0&&(m+=360)),[m,d,v]},oi=ii,si=b.unpack,ci=Math.floor,li=function(){for(var e,t,r,a,o,s,i=[],l=arguments.length;l--;)i[l]=arguments[l];i=si(i,"hcg");var u=i[0],d=i[1],v=i[2],m,p,w;v=v*255;var y=d*255;if(d===0)m=p=w=v;else{u===360&&(u=0),u>360&&(u-=360),u<0&&(u+=360),u/=60;var N=ci(u),x=u-N,B=v*(1-d),S=B+y*(1-x),Z=B+y*x,I=B+y;switch(N){case 0:e=[I,Z,B],m=e[0],p=e[1],w=e[2];break;case 1:t=[S,I,B],m=t[0],p=t[1],w=t[2];break;case 2:r=[B,I,Z],m=r[0],p=r[1],w=r[2];break;case 3:a=[B,S,I],m=a[0],p=a[1],w=a[2];break;case 4:o=[Z,B,I],m=o[0],p=o[1],w=o[2];break;case 5:s=[I,B,S],m=s[0],p=s[1],w=s[2];break}}return[m,p,w,i.length>3?i[3]:1]},hi=li,ui=b.unpack,fi=b.type,di=L,ar=$,nr=U,vi=oi;ar.prototype.hcg=function(){return vi(this._rgb)},di.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ar,[null].concat(e,["hcg"])))},nr.format.hcg=hi,nr.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ui(e,"hcg"),fi(e)==="array"&&e.length===3)return"hcg"}});var pi=b.unpack,gi=b.last,Se=Math.round,bi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=pi(e,"rgba"),a=r[0],o=r[1],s=r[2],i=r[3],l=gi(e)||"auto";i===void 0&&(i=1),l==="auto"&&(l=i<1?"rgba":"rgb"),a=Se(a),o=Se(o),s=Se(s);var u=a<<16|o<<8|s,d="000000"+u.toString(16);d=d.substr(d.length-6);var v="0"+Se(i*255).toString(16);switch(v=v.substr(v.length-2),l.toLowerCase()){case"rgba":return"#"+d+v;case"argb":return"#"+v+d;default:return"#"+d}},ir=bi,mi=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,yi=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,wi=function(e){if(e.match(mi)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16),r=t>>16,a=t>>8&255,o=t&255;return[r,a,o,1]}if(e.match(yi)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var s=parseInt(e,16),i=s>>24&255,l=s>>16&255,u=s>>8&255,d=Math.round((s&255)/255*100)/100;return[i,l,u,d]}throw new Error("unknown hex color: "+e)},or=wi,_i=L,sr=$,Pi=b.type,cr=U,ki=ir;sr.prototype.hex=function(e){return ki(this._rgb,e)},_i.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(sr,[null].concat(e,["hex"])))},cr.format.hex=or,cr.autodetect.push({p:4,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&Pi(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var $i=b.unpack,lr=b.TWOPI,Ni=Math.min,Mi=Math.sqrt,Ci=Math.acos,xi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=$i(e,"rgb"),a=r[0],o=r[1],s=r[2];a/=255,o/=255,s/=255;var i,l=Ni(a,o,s),u=(a+o+s)/3,d=u>0?1-l/u:0;return d===0?i=NaN:(i=(a-o+(a-s))/2,i/=Mi((a-o)*(a-o)+(a-s)*(o-s)),i=Ci(i),s>o&&(i=lr-i),i/=lr),[i*360,d,u]},Ei=xi,Bi=b.unpack,ct=b.limit,ve=b.TWOPI,lt=b.PITHIRD,pe=Math.cos,Ai=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Bi(e,"hsi");var r=e[0],a=e[1],o=e[2],s,i,l;return isNaN(r)&&(r=0),isNaN(a)&&(a=0),r>360&&(r-=360),r<0&&(r+=360),r/=360,r<1/3?(l=(1-a)/3,s=(1+a*pe(ve*r)/pe(lt-ve*r))/3,i=1-(l+s)):r<2/3?(r-=1/3,s=(1-a)/3,i=(1+a*pe(ve*r)/pe(lt-ve*r))/3,l=1-(s+i)):(r-=2/3,i=(1-a)/3,l=(1+a*pe(ve*r)/pe(lt-ve*r))/3,s=1-(i+l)),s=ct(o*s*3),i=ct(o*i*3),l=ct(o*l*3),[s*255,i*255,l*255,e.length>3?e[3]:1]},Si=Ai,Fi=b.unpack,Ti=b.type,Di=L,hr=$,ur=U,Hi=Ei;hr.prototype.hsi=function(){return Hi(this._rgb)},Di.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(hr,[null].concat(e,["hsi"])))},ur.format.hsi=Si,ur.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Fi(e,"hsi"),Ti(e)==="array"&&e.length===3)return"hsi"}});var zi=b.unpack,Ri=b.type,Li=L,fr=$,dr=U,Gi=Ot;fr.prototype.hsl=function(){return Gi(this._rgb)},Li.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(fr,[null].concat(e,["hsl"])))},dr.format.hsl=Ut,dr.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=zi(e,"hsl"),Ri(e)==="array"&&e.length===3)return"hsl"}});var Oi=b.unpack,Ui=Math.min,qi=Math.max,Ii=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Oi(e,"rgb");var r=e[0],a=e[1],o=e[2],s=Ui(r,a,o),i=qi(r,a,o),l=i-s,u,d,v;return v=i/255,i===0?(u=Number.NaN,d=0):(d=l/i,r===i&&(u=(a-o)/l),a===i&&(u=2+(o-r)/l),o===i&&(u=4+(r-a)/l),u*=60,u<0&&(u+=360)),[u,d,v]},Wi=Ii,Zi=b.unpack,Vi=Math.floor,Yi=function(){for(var e,t,r,a,o,s,i=[],l=arguments.length;l--;)i[l]=arguments[l];i=Zi(i,"hsv");var u=i[0],d=i[1],v=i[2],m,p,w;if(v*=255,d===0)m=p=w=v;else{u===360&&(u=0),u>360&&(u-=360),u<0&&(u+=360),u/=60;var y=Vi(u),N=u-y,x=v*(1-d),B=v*(1-d*N),S=v*(1-d*(1-N));switch(y){case 0:e=[v,S,x],m=e[0],p=e[1],w=e[2];break;case 1:t=[B,v,x],m=t[0],p=t[1],w=t[2];break;case 2:r=[x,v,S],m=r[0],p=r[1],w=r[2];break;case 3:a=[x,B,v],m=a[0],p=a[1],w=a[2];break;case 4:o=[S,x,v],m=o[0],p=o[1],w=o[2];break;case 5:s=[v,x,B],m=s[0],p=s[1],w=s[2];break}}return[m,p,w,i.length>3?i[3]:1]},ji=Yi,Xi=b.unpack,Ji=b.type,Qi=L,vr=$,pr=U,Ki=Wi;vr.prototype.hsv=function(){return Ki(this._rgb)},Qi.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(vr,[null].concat(e,["hsv"])))},pr.format.hsv=ji,pr.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Xi(e,"hsv"),Ji(e)==="array"&&e.length===3)return"hsv"}});var Fe={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ge=Fe,eo=b.unpack,gr=Math.pow,to=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=eo(e,"rgb"),a=r[0],o=r[1],s=r[2],i=ro(a,o,s),l=i[0],u=i[1],d=i[2],v=116*u-16;return[v<0?0:v,500*(l-u),200*(u-d)]},ht=function(e){return(e/=255)<=.04045?e/12.92:gr((e+.055)/1.055,2.4)},ut=function(e){return e>ge.t3?gr(e,1/3):e/ge.t2+ge.t0},ro=function(e,t,r){e=ht(e),t=ht(t),r=ht(r);var a=ut((.4124564*e+.3575761*t+.1804375*r)/ge.Xn),o=ut((.2126729*e+.7151522*t+.072175*r)/ge.Yn),s=ut((.0193339*e+.119192*t+.9503041*r)/ge.Zn);return[a,o,s]},br=to,be=Fe,ao=b.unpack,no=Math.pow,io=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=ao(e,"lab");var r=e[0],a=e[1],o=e[2],s,i,l,u,d,v;return i=(r+16)/116,s=isNaN(a)?i:i+a/500,l=isNaN(o)?i:i-o/200,i=be.Yn*dt(i),s=be.Xn*dt(s),l=be.Zn*dt(l),u=ft(3.2404542*s-1.5371385*i-.4985314*l),d=ft(-.969266*s+1.8760108*i+.041556*l),v=ft(.0556434*s-.2040259*i+1.0572252*l),[u,d,v,e.length>3?e[3]:1]},ft=function(e){return 255*(e<=.00304?12.92*e:1.055*no(e,1/2.4)-.055)},dt=function(e){return e>be.t1?e*e*e:be.t2*(e-be.t0)},mr=io,oo=b.unpack,so=b.type,co=L,yr=$,wr=U,lo=br;yr.prototype.lab=function(){return lo(this._rgb)},co.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(yr,[null].concat(e,["lab"])))},wr.format.lab=mr,wr.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=oo(e,"lab"),so(e)==="array"&&e.length===3)return"lab"}});var ho=b.unpack,uo=b.RAD2DEG,fo=Math.sqrt,vo=Math.atan2,po=Math.round,go=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ho(e,"lab"),a=r[0],o=r[1],s=r[2],i=fo(o*o+s*s),l=(vo(s,o)*uo+360)%360;return po(i*1e4)===0&&(l=Number.NaN),[a,i,l]},_r=go,bo=b.unpack,mo=br,yo=_r,wo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=bo(e,"rgb"),a=r[0],o=r[1],s=r[2],i=mo(a,o,s),l=i[0],u=i[1],d=i[2];return yo(l,u,d)},_o=wo,Po=b.unpack,ko=b.DEG2RAD,$o=Math.sin,No=Math.cos,Mo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Po(e,"lch"),a=r[0],o=r[1],s=r[2];return isNaN(s)&&(s=0),s=s*ko,[a,No(s)*o,$o(s)*o]},Pr=Mo,Co=b.unpack,xo=Pr,Eo=mr,Bo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Co(e,"lch");var r=e[0],a=e[1],o=e[2],s=xo(r,a,o),i=s[0],l=s[1],u=s[2],d=Eo(i,l,u),v=d[0],m=d[1],p=d[2];return[v,m,p,e.length>3?e[3]:1]},kr=Bo,Ao=b.unpack,So=kr,Fo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Ao(e,"hcl").reverse();return So.apply(void 0,r)},To=Fo,Do=b.unpack,Ho=b.type,$r=L,Te=$,vt=U,Nr=_o;Te.prototype.lch=function(){return Nr(this._rgb)},Te.prototype.hcl=function(){return Nr(this._rgb).reverse()},$r.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Te,[null].concat(e,["lch"])))},$r.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Te,[null].concat(e,["hcl"])))},vt.format.lch=kr,vt.format.hcl=To,["lch","hcl"].forEach(function(e){return vt.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=Do(t,e),Ho(t)==="array"&&t.length===3)return e}})});var zo={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Mr=zo,Ro=$,Cr=U,Lo=b.type,Me=Mr,Go=or,Oo=ir;Ro.prototype.name=function(){for(var e=Oo(this._rgb,"rgb"),t=0,r=Object.keys(Me);t<r.length;t+=1){var a=r[t];if(Me[a]===e)return a.toLowerCase()}return e},Cr.format.named=function(e){if(e=e.toLowerCase(),Me[e])return Go(Me[e]);throw new Error("unknown color name: "+e)},Cr.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&Lo(e)==="string"&&Me[e.toLowerCase()])return"named"}});var Uo=b.unpack,qo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Uo(e,"rgb"),a=r[0],o=r[1],s=r[2];return(a<<16)+(o<<8)+s},Io=qo,Wo=b.type,Zo=function(e){if(Wo(e)=="number"&&e>=0&&e<=16777215){var t=e>>16,r=e>>8&255,a=e&255;return[t,r,a,1]}throw new Error("unknown num color: "+e)},Vo=Zo,Yo=L,xr=$,Er=U,jo=b.type,Xo=Io;xr.prototype.num=function(){return Xo(this._rgb)},Yo.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(xr,[null].concat(e,["num"])))},Er.format.num=Vo,Er.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e.length===1&&jo(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});var Jo=L,pt=$,Br=U,Ar=b.unpack,Sr=b.type,Fr=Math.round;pt.prototype.rgb=function(e){return e===void 0&&(e=!0),e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Fr)},pt.prototype.rgba=function(e){return e===void 0&&(e=!0),this._rgb.slice(0,4).map(function(t,r){return r<3?e===!1?t:Fr(t):t})},Jo.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(pt,[null].concat(e,["rgb"])))},Br.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Ar(e,"rgba");return r[3]===void 0&&(r[3]=1),r},Br.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ar(e,"rgba"),Sr(e)==="array"&&(e.length===3||e.length===4&&Sr(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});var De=Math.log,Qo=function(e){var t=e/100,r,a,o;return t<66?(r=255,a=t<6?0:-155.25485562709179-.44596950469579133*(a=t-2)+104.49216199393888*De(a),o=t<20?0:-254.76935184120902+.8274096064007395*(o=t-10)+115.67994401066147*De(o)):(r=351.97690566805693+.114206453784165*(r=t-55)-40.25366309332127*De(r),a=325.4494125711974+.07943456536662342*(a=t-50)-28.0852963507957*De(a),o=255),[r,a,o,1]},Tr=Qo,Ko=Tr,es=b.unpack,ts=Math.round,rs=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r=es(e,"rgb"),a=r[0],o=r[2],s=1e3,i=4e4,l=.4,u;i-s>l;){u=(i+s)*.5;var d=Ko(u);d[2]/d[0]>=o/a?i=u:s=u}return ts(u)},as=rs,gt=L,He=$,bt=U,ns=as;He.prototype.temp=He.prototype.kelvin=He.prototype.temperature=function(){return ns(this._rgb)},gt.temp=gt.kelvin=gt.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(He,[null].concat(e,["temp"])))},bt.format.temp=bt.format.kelvin=bt.format.temperature=Tr;var is=b.unpack,mt=Math.cbrt,os=Math.pow,ss=Math.sign,cs=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=is(e,"rgb"),a=r[0],o=r[1],s=r[2],i=[yt(a/255),yt(o/255),yt(s/255)],l=i[0],u=i[1],d=i[2],v=mt(.4122214708*l+.5363325363*u+.0514459929*d),m=mt(.2119034982*l+.6806995451*u+.1073969566*d),p=mt(.0883024619*l+.2817188376*u+.6299787005*d);return[.2104542553*v+.793617785*m-.0040720468*p,1.9779984951*v-2.428592205*m+.4505937099*p,.0259040371*v+.7827717662*m-.808675766*p]},Dr=cs;function yt(e){var t=Math.abs(e);return t<.04045?e/12.92:(ss(e)||1)*os((t+.055)/1.055,2.4)}var ls=b.unpack,ze=Math.pow,hs=Math.sign,us=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=ls(e,"lab");var r=e[0],a=e[1],o=e[2],s=ze(r+.3963377774*a+.2158037573*o,3),i=ze(r-.1055613458*a-.0638541728*o,3),l=ze(r-.0894841775*a-1.291485548*o,3);return[255*wt(4.0767416621*s-3.3077115913*i+.2309699292*l),255*wt(-1.2684380046*s+2.6097574011*i-.3413193965*l),255*wt(-.0041960863*s-.7034186147*i+1.707614701*l),e.length>3?e[3]:1]},Hr=us;function wt(e){var t=Math.abs(e);return t>.0031308?(hs(e)||1)*(1.055*ze(t,1/2.4)-.055):e*12.92}var fs=b.unpack,ds=b.type,vs=L,zr=$,Rr=U,ps=Dr;zr.prototype.oklab=function(){return ps(this._rgb)},vs.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(zr,[null].concat(e,["oklab"])))},Rr.format.oklab=Hr,Rr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=fs(e,"oklab"),ds(e)==="array"&&e.length===3)return"oklab"}});var gs=b.unpack,bs=Dr,ms=_r,ys=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=gs(e,"rgb"),a=r[0],o=r[1],s=r[2],i=bs(a,o,s),l=i[0],u=i[1],d=i[2];return ms(l,u,d)},ws=ys,_s=b.unpack,Ps=Pr,ks=Hr,$s=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=_s(e,"lch");var r=e[0],a=e[1],o=e[2],s=Ps(r,a,o),i=s[0],l=s[1],u=s[2],d=ks(i,l,u),v=d[0],m=d[1],p=d[2];return[v,m,p,e.length>3?e[3]:1]},Ns=$s,Ms=b.unpack,Cs=b.type,xs=L,Lr=$,Gr=U,Es=ws;Lr.prototype.oklch=function(){return Es(this._rgb)},xs.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Lr,[null].concat(e,["oklch"])))},Gr.format.oklch=Ns,Gr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ms(e,"oklch"),Cs(e)==="array"&&e.length===3)return"oklch"}});var Or=$,Bs=b.type;Or.prototype.alpha=function(e,t){return t===void 0&&(t=!1),e!==void 0&&Bs(e)==="number"?t?(this._rgb[3]=e,this):new Or([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};var As=$;As.prototype.clipped=function(){return this._rgb._clipped||!1};var ue=$,Ss=Fe;ue.prototype.darken=function(e){e===void 0&&(e=1);var t=this,r=t.lab();return r[0]-=Ss.Kn*e,new ue(r,"lab").alpha(t.alpha(),!0)},ue.prototype.brighten=function(e){return e===void 0&&(e=1),this.darken(-e)},ue.prototype.darker=ue.prototype.darken,ue.prototype.brighter=ue.prototype.brighten;var Fs=$;Fs.prototype.get=function(e){var t=e.split("."),r=t[0],a=t[1],o=this[r]();if(a){var s=r.indexOf(a)-(r.substr(0,2)==="ok"?2:0);if(s>-1)return o[s];throw new Error("unknown channel "+a+" in mode "+r)}else return o};var me=$,Ts=b.type,Ds=Math.pow,Hs=1e-7,zs=20;me.prototype.luminance=function(e){if(e!==void 0&&Ts(e)==="number"){if(e===0)return new me([0,0,0,this._rgb[3]],"rgb");if(e===1)return new me([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),r="rgb",a=zs,o=function(i,l){var u=i.interpolate(l,.5,r),d=u.luminance();return Math.abs(e-d)<Hs||!a--?u:d>e?o(i,u):o(u,l)},s=(t>e?o(new me([0,0,0]),this):o(this,new me([255,255,255]))).rgb();return new me(s.concat([this._rgb[3]]))}return Rs.apply(void 0,this._rgb.slice(0,3))};var Rs=function(e,t,r){return e=_t(e),t=_t(t),r=_t(r),.2126*e+.7152*t+.0722*r},_t=function(e){return e/=255,e<=.03928?e/12.92:Ds((e+.055)/1.055,2.4)},Q={},Ur=$,qr=b.type,Re=Q,Ir=function(e,t,r){r===void 0&&(r=.5);for(var a=[],o=arguments.length-3;o-- >0;)a[o]=arguments[o+3];var s=a[0]||"lrgb";if(!Re[s]&&!a.length&&(s=Object.keys(Re)[0]),!Re[s])throw new Error("interpolation mode "+s+" is not defined");return qr(e)!=="object"&&(e=new Ur(e)),qr(t)!=="object"&&(t=new Ur(t)),Re[s](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))},Wr=$,Ls=Ir;Wr.prototype.mix=Wr.prototype.interpolate=function(e,t){t===void 0&&(t=.5);for(var r=[],a=arguments.length-2;a-- >0;)r[a]=arguments[a+2];return Ls.apply(void 0,[this,e,t].concat(r))};var Zr=$;Zr.prototype.premultiply=function(e){e===void 0&&(e=!1);var t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new Zr([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};var Pt=$,Gs=Fe;Pt.prototype.saturate=function(e){e===void 0&&(e=1);var t=this,r=t.lch();return r[1]+=Gs.Kn*e,r[1]<0&&(r[1]=0),new Pt(r,"lch").alpha(t.alpha(),!0)},Pt.prototype.desaturate=function(e){return e===void 0&&(e=1),this.saturate(-e)};var Vr=$,Yr=b.type;Vr.prototype.set=function(e,t,r){r===void 0&&(r=!1);var a=e.split("."),o=a[0],s=a[1],i=this[o]();if(s){var l=o.indexOf(s)-(o.substr(0,2)==="ok"?2:0);if(l>-1){if(Yr(t)=="string")switch(t.charAt(0)){case"+":i[l]+=+t;break;case"-":i[l]+=+t;break;case"*":i[l]*=+t.substr(1);break;case"/":i[l]/=+t.substr(1);break;default:i[l]=+t}else if(Yr(t)==="number")i[l]=t;else throw new Error("unsupported value for Color.set");var u=new Vr(i,o);return r?(this._rgb=u._rgb,this):u}throw new Error("unknown channel "+s+" in mode "+o)}else return i};var Os=$,Us=function(e,t,r){var a=e._rgb,o=t._rgb;return new Os(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),"rgb")};Q.rgb=Us;var qs=$,kt=Math.sqrt,ye=Math.pow,Is=function(e,t,r){var a=e._rgb,o=a[0],s=a[1],i=a[2],l=t._rgb,u=l[0],d=l[1],v=l[2];return new qs(kt(ye(o,2)*(1-r)+ye(u,2)*r),kt(ye(s,2)*(1-r)+ye(d,2)*r),kt(ye(i,2)*(1-r)+ye(v,2)*r),"rgb")};Q.lrgb=Is;var Ws=$,Zs=function(e,t,r){var a=e.lab(),o=t.lab();return new Ws(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),"lab")};Q.lab=Zs;var jr=$,we=function(e,t,r,a){var o,s,i,l;a==="hsl"?(i=e.hsl(),l=t.hsl()):a==="hsv"?(i=e.hsv(),l=t.hsv()):a==="hcg"?(i=e.hcg(),l=t.hcg()):a==="hsi"?(i=e.hsi(),l=t.hsi()):a==="lch"||a==="hcl"?(a="hcl",i=e.hcl(),l=t.hcl()):a==="oklch"&&(i=e.oklch().reverse(),l=t.oklch().reverse());var u,d,v,m,p,w;(a.substr(0,1)==="h"||a==="oklch")&&(o=i,u=o[0],v=o[1],p=o[2],s=l,d=s[0],m=s[1],w=s[2]);var y,N,x,B;return!isNaN(u)&&!isNaN(d)?(d>u&&d-u>180?B=d-(u+360):d<u&&u-d>180?B=d+360-u:B=d-u,N=u+r*B):isNaN(u)?isNaN(d)?N=Number.NaN:(N=d,(p==1||p==0)&&a!="hsv"&&(y=m)):(N=u,(w==1||w==0)&&a!="hsv"&&(y=v)),y===void 0&&(y=v+r*(m-v)),x=p+r*(w-p),a==="oklch"?new jr([x,y,N],a):new jr([N,y,x],a)},Vs=we,Xr=function(e,t,r){return Vs(e,t,r,"lch")};Q.lch=Xr,Q.hcl=Xr;var Ys=$,js=function(e,t,r){var a=e.num(),o=t.num();return new Ys(a+r*(o-a),"num")};Q.num=js;var Xs=we,Js=function(e,t,r){return Xs(e,t,r,"hcg")};Q.hcg=Js;var Qs=we,Ks=function(e,t,r){return Qs(e,t,r,"hsi")};Q.hsi=Ks;var ec=we,tc=function(e,t,r){return ec(e,t,r,"hsl")};Q.hsl=tc;var rc=we,ac=function(e,t,r){return rc(e,t,r,"hsv")};Q.hsv=ac;var nc=$,ic=function(e,t,r){var a=e.oklab(),o=t.oklab();return new nc(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),"oklab")};Q.oklab=ic;var oc=we,sc=function(e,t,r){return oc(e,t,r,"oklch")};Q.oklch=sc;var $t=$,cc=b.clip_rgb,Nt=Math.pow,Mt=Math.sqrt,Ct=Math.PI,Jr=Math.cos,Qr=Math.sin,lc=Math.atan2,hc=function(e,t,r){t===void 0&&(t="lrgb"),r===void 0&&(r=null);var a=e.length;r||(r=Array.from(new Array(a)).map(function(){return 1}));var o=a/r.reduce(function(N,x){return N+x});if(r.forEach(function(N,x){r[x]*=o}),e=e.map(function(N){return new $t(N)}),t==="lrgb")return uc(e,r);for(var s=e.shift(),i=s.get(t),l=[],u=0,d=0,v=0;v<i.length;v++)if(i[v]=(i[v]||0)*r[0],l.push(isNaN(i[v])?0:r[0]),t.charAt(v)==="h"&&!isNaN(i[v])){var m=i[v]/180*Ct;u+=Jr(m)*r[0],d+=Qr(m)*r[0]}var p=s.alpha()*r[0];e.forEach(function(N,x){var B=N.get(t);p+=N.alpha()*r[x+1];for(var S=0;S<i.length;S++)if(!isNaN(B[S]))if(l[S]+=r[x+1],t.charAt(S)==="h"){var Z=B[S]/180*Ct;u+=Jr(Z)*r[x+1],d+=Qr(Z)*r[x+1]}else i[S]+=B[S]*r[x+1]});for(var w=0;w<i.length;w++)if(t.charAt(w)==="h"){for(var y=lc(d/l[w],u/l[w])/Ct*180;y<0;)y+=360;for(;y>=360;)y-=360;i[w]=y}else i[w]=i[w]/l[w];return p/=a,new $t(i,t).alpha(p>.99999?1:p,!0)},uc=function(e,t){for(var r=e.length,a=[0,0,0,0],o=0;o<e.length;o++){var s=e[o],i=t[o]/r,l=s._rgb;a[0]+=Nt(l[0],2)*i,a[1]+=Nt(l[1],2)*i,a[2]+=Nt(l[2],2)*i,a[3]+=l[3]*i}return a[0]=Mt(a[0]),a[1]=Mt(a[1]),a[2]=Mt(a[2]),a[3]>.9999999&&(a[3]=1),new $t(cc(a))},K=L,_e=b.type,fc=Math.pow,xt=function(e){var t="rgb",r=K("#ccc"),a=0,o=[0,1],s=[],i=[0,0],l=!1,u=[],d=!1,v=0,m=1,p=!1,w={},y=!0,N=1,x=function(g){if(g=g||["#fff","#000"],g&&_e(g)==="string"&&K.brewer&&K.brewer[g.toLowerCase()]&&(g=K.brewer[g.toLowerCase()]),_e(g)==="array"){g.length===1&&(g=[g[0],g[0]]),g=g.slice(0);for(var P=0;P<g.length;P++)g[P]=K(g[P]);s.length=0;for(var C=0;C<g.length;C++)s.push(C/(g.length-1))}return X(),u=g},B=function(g){if(l!=null){for(var P=l.length-1,C=0;C<P&&g>=l[C];)C++;return C-1}return 0},S=function(g){return g},Z=function(g){return g},I=function(g,P){var C,M;if(P==null&&(P=!1),isNaN(g)||g===null)return r;if(P)M=g;else if(l&&l.length>2){var V=B(g);M=V/(l.length-2)}else m!==v?M=(g-v)/(m-v):M=1;M=Z(M),P||(M=S(M)),N!==1&&(M=fc(M,N)),M=i[0]+M*(1-i[0]-i[1]),M=Math.min(1,Math.max(0,M));var H=Math.floor(M*1e4);if(y&&w[H])C=w[H];else{if(_e(u)==="array")for(var A=0;A<s.length;A++){var F=s[A];if(M<=F){C=u[A];break}if(M>=F&&A===s.length-1){C=u[A];break}if(M>F&&M<s[A+1]){M=(M-F)/(s[A+1]-F),C=K.interpolate(u[A],u[A+1],M,t);break}}else _e(u)==="function"&&(C=u(M));y&&(w[H]=C)}return C},X=function(){return w={}};x(e);var E=function(g){var P=K(I(g));return d&&P[d]?P[d]():P};return E.classes=function(g){if(g!=null){if(_e(g)==="array")l=g,o=[g[0],g[g.length-1]];else{var P=K.analyze(o);g===0?l=[P.min,P.max]:l=K.limits(P,"e",g)}return E}return l},E.domain=function(g){if(!arguments.length)return o;v=g[0],m=g[g.length-1],s=[];var P=u.length;if(g.length===P&&v!==m)for(var C=0,M=Array.from(g);C<M.length;C+=1){var V=M[C];s.push((V-v)/(m-v))}else{for(var H=0;H<P;H++)s.push(H/(P-1));if(g.length>2){var A=g.map(function(T,D){return D/(g.length-1)}),F=g.map(function(T){return(T-v)/(m-v)});F.every(function(T,D){return A[D]===T})||(Z=function(T){if(T<=0||T>=1)return T;for(var D=0;T>=F[D+1];)D++;var te=(T-F[D])/(F[D+1]-F[D]),se=A[D]+te*(A[D+1]-A[D]);return se})}}return o=[v,m],E},E.mode=function(g){return arguments.length?(t=g,X(),E):t},E.range=function(g,P){return x(g),E},E.out=function(g){return d=g,E},E.spread=function(g){return arguments.length?(a=g,E):a},E.correctLightness=function(g){return g==null&&(g=!0),p=g,X(),p?S=function(P){for(var C=I(0,!0).lab()[0],M=I(1,!0).lab()[0],V=C>M,H=I(P,!0).lab()[0],A=C+(M-C)*P,F=H-A,T=0,D=1,te=20;Math.abs(F)>.01&&te-- >0;)(function(){return V&&(F*=-1),F<0?(T=P,P+=(D-P)*.5):(D=P,P+=(T-P)*.5),H=I(P,!0).lab()[0],F=H-A})();return P}:S=function(P){return P},E},E.padding=function(g){return g!=null?(_e(g)==="number"&&(g=[g,g]),i=g,E):i},E.colors=function(g,P){arguments.length<2&&(P="hex");var C=[];if(arguments.length===0)C=u.slice(0);else if(g===1)C=[E(.5)];else if(g>1){var M=o[0],V=o[1]-M;C=dc(0,g,!1).map(function(D){return E(M+D/(g-1)*V)})}else{e=[];var H=[];if(l&&l.length>2)for(var A=1,F=l.length,T=1<=F;T?A<F:A>F;T?A++:A--)H.push((l[A-1]+l[A])*.5);else H=o;C=H.map(function(D){return E(D)})}return K[P]&&(C=C.map(function(D){return D[P]()})),C},E.cache=function(g){return g!=null?(y=g,E):y},E.gamma=function(g){return g!=null?(N=g,E):N},E.nodata=function(g){return g!=null?(r=K(g),E):r},E};function dc(e,t,r){for(var a=[],o=e<t,s=r?o?t+1:t-1:t,i=e;o?i<s:i>s;o?i++:i--)a.push(i);return a}var Ce=$,vc=xt,pc=function(e){for(var t=[1,1],r=1;r<e;r++){for(var a=[1],o=1;o<=t.length;o++)a[o]=(t[o]||0)+t[o-1];t=a}return t},gc=function(e){var t,r,a,o,s,i,l;if(e=e.map(function(p){return new Ce(p)}),e.length===2)t=e.map(function(p){return p.lab()}),s=t[0],i=t[1],o=function(p){var w=[0,1,2].map(function(y){return s[y]+p*(i[y]-s[y])});return new Ce(w,"lab")};else if(e.length===3)r=e.map(function(p){return p.lab()}),s=r[0],i=r[1],l=r[2],o=function(p){var w=[0,1,2].map(function(y){return(1-p)*(1-p)*s[y]+2*(1-p)*p*i[y]+p*p*l[y]});return new Ce(w,"lab")};else if(e.length===4){var u;a=e.map(function(p){return p.lab()}),s=a[0],i=a[1],l=a[2],u=a[3],o=function(p){var w=[0,1,2].map(function(y){return(1-p)*(1-p)*(1-p)*s[y]+3*(1-p)*(1-p)*p*i[y]+3*(1-p)*p*p*l[y]+p*p*p*u[y]});return new Ce(w,"lab")}}else if(e.length>=5){var d,v,m;d=e.map(function(p){return p.lab()}),m=e.length-1,v=pc(m),o=function(p){var w=1-p,y=[0,1,2].map(function(N){return d.reduce(function(x,B,S){return x+v[S]*Math.pow(w,m-S)*Math.pow(p,S)*B[N]},0)});return new Ce(y,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return o},bc=function(e){var t=gc(e);return t.scale=function(){return vc(t)},t},Et=L,ee=function(e,t,r){if(!ee[r])throw new Error("unknown blend mode "+r);return ee[r](e,t)},ie=function(e){return function(t,r){var a=Et(r).rgb(),o=Et(t).rgb();return Et.rgb(e(a,o))}},oe=function(e){return function(t,r){var a=[];return a[0]=e(t[0],r[0]),a[1]=e(t[1],r[1]),a[2]=e(t[2],r[2]),a}},mc=function(e){return e},yc=function(e,t){return e*t/255},wc=function(e,t){return e>t?t:e},_c=function(e,t){return e>t?e:t},Pc=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},kc=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},$c=function(e,t){return 255*(1-(1-t/255)/(e/255))},Nc=function(e,t){return e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e)};ee.normal=ie(oe(mc)),ee.multiply=ie(oe(yc)),ee.screen=ie(oe(Pc)),ee.overlay=ie(oe(kc)),ee.darken=ie(oe(wc)),ee.lighten=ie(oe(_c)),ee.dodge=ie(oe(Nc)),ee.burn=ie(oe($c));for(var Mc=ee,Bt=b.type,Cc=b.clip_rgb,xc=b.TWOPI,Ec=Math.pow,Bc=Math.sin,Ac=Math.cos,Kr=L,Sc=function(e,t,r,a,o){e===void 0&&(e=300),t===void 0&&(t=-1.5),r===void 0&&(r=1),a===void 0&&(a=1),o===void 0&&(o=[0,1]);var s=0,i;Bt(o)==="array"?i=o[1]-o[0]:(i=0,o=[o,o]);var l=function(u){var d=xc*((e+120)/360+t*u),v=Ec(o[0]+i*u,a),m=s!==0?r[0]+u*s:r,p=m*v*(1-v)/2,w=Ac(d),y=Bc(d),N=v+p*(-.14861*w+1.78277*y),x=v+p*(-.29227*w-.90649*y),B=v+p*(1.97294*w);return Kr(Cc([N*255,x*255,B*255,1]))};return l.start=function(u){return u==null?e:(e=u,l)},l.rotations=function(u){return u==null?t:(t=u,l)},l.gamma=function(u){return u==null?a:(a=u,l)},l.hue=function(u){return u==null?r:(r=u,Bt(r)==="array"?(s=r[1]-r[0],s===0&&(r=r[1])):s=0,l)},l.lightness=function(u){return u==null?o:(Bt(u)==="array"?(o=u,i=u[1]-u[0]):(o=[u,u],i=0),l)},l.scale=function(){return Kr.scale(l)},l.hue(r),l},Fc=$,Tc="0123456789abcdef",Dc=Math.floor,Hc=Math.random,zc=function(){for(var e="#",t=0;t<6;t++)e+=Tc.charAt(Dc(Hc()*16));return new Fc(e,"hex")},At=Be,ea=Math.log,Rc=Math.pow,Lc=Math.floor,Gc=Math.abs,ta=function(e,t){t===void 0&&(t=null);var r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return At(e)==="object"&&(e=Object.values(e)),e.forEach(function(a){t&&At(a)==="object"&&(a=a[t]),a!=null&&!isNaN(a)&&(r.values.push(a),r.sum+=a,a<r.min&&(r.min=a),a>r.max&&(r.max=a),r.count+=1)}),r.domain=[r.min,r.max],r.limits=function(a,o){return ra(r,a,o)},r},ra=function(e,t,r){t===void 0&&(t="equal"),r===void 0&&(r=7),At(e)=="array"&&(e=ta(e));var a=e.min,o=e.max,s=e.values.sort(function(Ft,Tt){return Ft-Tt});if(r===1)return[a,o];var i=[];if(t.substr(0,1)==="c"&&(i.push(a),i.push(o)),t.substr(0,1)==="e"){i.push(a);for(var l=1;l<r;l++)i.push(a+l/r*(o-a));i.push(o)}else if(t.substr(0,1)==="l"){if(a<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*ea(a),d=Math.LOG10E*ea(o);i.push(a);for(var v=1;v<r;v++)i.push(Rc(10,u+v/r*(d-u)));i.push(o)}else if(t.substr(0,1)==="q"){i.push(a);for(var m=1;m<r;m++){var p=(s.length-1)*m/r,w=Lc(p);if(w===p)i.push(s[w]);else{var y=p-w;i.push(s[w]*(1-y)+s[w+1]*y)}}i.push(o)}else if(t.substr(0,1)==="k"){var N,x=s.length,B=new Array(x),S=new Array(r),Z=!0,I=0,X=null;X=[],X.push(a);for(var E=1;E<r;E++)X.push(a+E/r*(o-a));for(X.push(o);Z;){for(var g=0;g<r;g++)S[g]=0;for(var P=0;P<x;P++)for(var C=s[P],M=Number.MAX_VALUE,V=void 0,H=0;H<r;H++){var A=Gc(X[H]-C);A<M&&(M=A,V=H),S[V]++,B[P]=V}for(var F=new Array(r),T=0;T<r;T++)F[T]=null;for(var D=0;D<x;D++)N=B[D],F[N]===null?F[N]=s[D]:F[N]+=s[D];for(var te=0;te<r;te++)F[te]*=1/S[te];Z=!1;for(var se=0;se<r;se++)if(F[se]!==X[se]){Z=!0;break}X=F,I++,I>200&&(Z=!1)}for(var ce={},Pe=0;Pe<r;Pe++)ce[Pe]=[];for(var ke=0;ke<x;ke++)N=B[ke],ce[N].push(s[ke]);for(var ae=[],fe=0;fe<r;fe++)ae.push(ce[fe][0]),ae.push(ce[fe][ce[fe].length-1]);ae=ae.sort(function(Ft,Tt){return Ft-Tt}),i.push(ae[0]);for(var xe=1;xe<ae.length;xe+=2){var de=ae[xe];!isNaN(de)&&i.indexOf(de)===-1&&i.push(de)}}return i},aa={analyze:ta,limits:ra},na=$,Oc=function(e,t){e=new na(e),t=new na(t);var r=e.luminance(),a=t.luminance();return r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)},ia=$,re=Math.sqrt,G=Math.pow,Uc=Math.min,qc=Math.max,oa=Math.atan2,sa=Math.abs,Le=Math.cos,ca=Math.sin,Ic=Math.exp,la=Math.PI,Wc=function(e,t,r,a,o){r===void 0&&(r=1),a===void 0&&(a=1),o===void 0&&(o=1);var s=function(de){return 360*de/(2*la)},i=function(de){return 2*la*de/360};e=new ia(e),t=new ia(t);var l=Array.from(e.lab()),u=l[0],d=l[1],v=l[2],m=Array.from(t.lab()),p=m[0],w=m[1],y=m[2],N=(u+p)/2,x=re(G(d,2)+G(v,2)),B=re(G(w,2)+G(y,2)),S=(x+B)/2,Z=.5*(1-re(G(S,7)/(G(S,7)+G(25,7)))),I=d*(1+Z),X=w*(1+Z),E=re(G(I,2)+G(v,2)),g=re(G(X,2)+G(y,2)),P=(E+g)/2,C=s(oa(v,I)),M=s(oa(y,X)),V=C>=0?C:C+360,H=M>=0?M:M+360,A=sa(V-H)>180?(V+H+360)/2:(V+H)/2,F=1-.17*Le(i(A-30))+.24*Le(i(2*A))+.32*Le(i(3*A+6))-.2*Le(i(4*A-63)),T=H-V;T=sa(T)<=180?T:H<=V?T+360:T-360,T=2*re(E*g)*ca(i(T)/2);var D=p-u,te=g-E,se=1+.015*G(N-50,2)/re(20+G(N-50,2)),ce=1+.045*P,Pe=1+.015*P*F,ke=30*Ic(-G((A-275)/25,2)),ae=2*re(G(P,7)/(G(P,7)+G(25,7))),fe=-ae*ca(2*i(ke)),xe=re(G(D/(r*se),2)+G(te/(a*ce),2)+G(T/(o*Pe),2)+fe*(te/(a*ce))*(T/(o*Pe)));return qc(0,Uc(100,xe))},ha=$,Zc=function(e,t,r){r===void 0&&(r="lab"),e=new ha(e),t=new ha(t);var a=e.get(r),o=t.get(r),s=0;for(var i in a){var l=(a[i]||0)-(o[i]||0);s+=l*l}return Math.sqrt(s)},Vc=$,Yc=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(Vc,[null].concat(e))),!0}catch{return!1}},ua=L,fa=xt,jc={cool:function(){return fa([ua.hsl(180,1,.9),ua.hsl(250,.7,.4)])},hot:function(){return fa(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Ge={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},St=0,da=Object.keys(Ge);St<da.length;St+=1){var va=da[St];Ge[va.toLowerCase()]=Ge[va]}var Xc=Ge,q=L;q.average=hc,q.bezier=bc,q.blend=Mc,q.cubehelix=Sc,q.mix=q.interpolate=Ir,q.random=zc,q.scale=xt,q.analyze=aa.analyze,q.contrast=Oc,q.deltaE=Wc,q.distance=Zc,q.limits=aa.limits,q.valid=Yc,q.scales=jc,q.colors=Mr,q.brewer=Xc;var Jc=q;return Jc})})(wn);var pl=wn.exports;const gl=il(pl);class bl{constructor(){this.clip=null,this.xZoom=1,this.yZoom=1,this.beatsPerBar=4,this.divisionsPerBeat=2,this.snapStrength=.05,this.noteResizeHandleArea=.2,this.selectedNote=null,this.playheads=[],this._minPitch=0,this._maxPitch=127,this._scale=j.ScaleTemplate.major.create("C"),this._filterPitchesByScale=!1,this._customPitchNames=null,this._pitchesCache=null,this.noteColor=this._defaultNoteColor,this.canAddNote=n=>!0,this.canEditNoteStart=n=>!0,this.canEditNoteEnd=n=>!0,this.canEditNotePitch=n=>!0,this.canDeleteNote=n=>!0,this._defaultNoteColors=["#f44336","#e81e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"]}get minPitch(){return this._minPitch}set minPitch(n){n!=this._minPitch&&(this._minPitch=n,this._pitchesCache=null)}get maxPitch(){return this._maxPitch}set maxPitch(n){n!=this._maxPitch&&(this._maxPitch=n,this._pitchesCache=null)}get scale(){return this._scale}set scale(n){n!==this._scale&&(this._scale=n,this._pitchesCache=null)}get filterPitchesByScale(){return this._filterPitchesByScale}set filterPitchesByScale(n){n!=this._filterPitchesByScale&&(this._filterPitchesByScale=n,this._pitchesCache=null)}get customPitchNames(){return this._customPitchNames}set customPitchNames(n){n!=this._customPitchNames&&(this._customPitchNames=n,this._pitchesCache=null)}get pitches(){if(this._pitchesCache==null){const n=[];if(this.customPitchNames){for(const h of this.customPitchNames.keys())n.push(h);n.sort((h,f)=>f-h)}else for(let h=this.maxPitch;h>=this.minPitch;h--)(!this.filterPitchesByScale||this.scale.contains(h))&&n.push(h);this._pitchesCache=n}return this._pitchesCache}get beatWidth(){return 100*this.xZoom}set beatWidth(n){this.xZoom=n/100}get pitchHeight(){return 20*this.yZoom}set pitchHeight(n){this.yZoom=n/20}get clipBeats(){var n;return((n=this.clip)==null?void 0:n.duration)??0}get beatsPerDivision(){return 1/this.divisionsPerBeat}get totalWidth(){return this.clip?this.clipBeats*this.beatWidth:0}set totalWidth(n){!this.clip||this.clip.duration<=0||(this.beatWidth=n/this.clipBeats)}get totalHeight(){return this.clip?this.pitches.length*this.pitchHeight:0}set totalHeight(n){this.clip&&(this.pitchHeight=n/this.pitches.length)}pitchIsBlack(n){const h=n%12;return h==1||h==3||h==6||h==8||h==10}getPitchName(n){return this.customPitchNames?this.customPitchNames.get(n)??"":this.scale.getPitchName(n,!0)}getXFromBeat(n){return n*this.beatWidth}getBeatFromX(n){var h;return Math.min(((h=this.clip)==null?void 0:h.duration)??0,Math.max(0,n/this.beatWidth))}getYFromPitch(n){return this.pitches.indexOf(n)*this.pitchHeight}getPitchFromY(n){const h=Math.floor(n/this.pitchHeight);return h<0||h>=this.pitches.length?0:Math.min(127,Math.max(0,this.pitches[h]))}getBeatLines(){const n=[{beat:0,class:"bar-line"}];for(let f=0;f<this.beatsPerBar;f++){f>0&&n.push({beat:f,class:"beat-line"});for(let _=1;_<this.divisionsPerBeat;_++)n.push({beat:f+_/this.divisionsPerBeat,class:"division-line"})}const h=[];for(let f=0;f<this.clipBeats;f+=this.beatsPerBar)for(const _ of n){const k=f+_.beat;k>=0&&k<=this.clipBeats&&h.push({beat:k,class:_.class})}return h}getNoteAt(n,h){return this.clip?this.clip.notes.find(f=>f.pitch==h&&f.contains(n))??null:null}getNearestDivisionBeat(n){return Math.round(n*this.divisionsPerBeat)/this.divisionsPerBeat}getPreviousDivisionBeat(n){return Math.floor(n*this.divisionsPerBeat)/this.divisionsPerBeat}getNextDivisionBeat(n){return Math.ceil(n*this.divisionsPerBeat)/this.divisionsPerBeat}getSnappedBeat(n){const h=this.getNearestDivisionBeat(n);return Math.abs(n-h)<=this.beatsPerDivision*this.snapStrength?h:n}_defaultNoteColor(n,h){let f=gl(this._defaultNoteColors[n.channel%16]);return h&&(f=f.brighten(.4)),typeof n.velocity=="number"?f=f.alpha((n.velocity+128)/255):f=f.alpha(.75),f.hex()}}const Y={none:0,noteCreation:1,noteStart:2,noteEnd:4,pitch:8};class ml{constructor(n,h){this._dragMode=Y.none,this._dragOffset=0,this._clipEditor=n,this._viewModel=h}onMouseDown(n,h){const f=this._viewModel;if(!f.clip)return;const _=f.getBeatFromX(n.x),k=f.getPitchFromY(n.y),W=f.getNoteAt(_,k);h==1&&W?this._removeNote(W):h==0&&(W?this._beginNoteDrag(W,_):this._addNewNote(_,k))}onDoubleClick(n){this.onMouseDown(n,1)}onMouseMove(n){const h=this._viewModel;if(!h.selectedNote||this._dragMode==Y.none)return;const f=(this._dragMode&Y.noteCreation)>0,_=(this._dragMode&Y.noteStart)>0,k=(this._dragMode&Y.noteEnd)>0,W=(this._dragMode&Y.pitch)>0,ne=h.getSnappedBeat(h.getBeatFromX(n.x)-this._dragOffset);if(_&&k)h.selectedNote.start=ne;else if(_){if(ne<h.selectedNote.end){const le=h.selectedNote.end;h.selectedNote.start=ne,h.selectedNote.end=le}}else if(k)ne>h.selectedNote.start&&(h.selectedNote.end=ne);else if(f){const le=h.getNextDivisionBeat(h.getBeatFromX(n.x));le>h.selectedNote.start&&(h.selectedNote.end=le)}W&&(h.selectedNote.pitch=h.getPitchFromY(n.y)),this._clipEditor.requestUpdate()}onMouseUp(n,h){const f=this._viewModel;h==0&&(this._dragMode=Y.none,f.clip&&f.selectedNote&&f.selectedNote.duration<=0&&(f.clip.notes=f.clip.notes.filter(_=>_!==f.selectedNote)),f.selectedNote=null,this._clipEditor.requestUpdate())}onMouseLeave(n,h){this.onMouseUp(n,0)}_addNewNote(n,h){var k;const f=this._viewModel,_=new j.ClipNote(f.getPreviousDivisionBeat(n),f.beatsPerDivision,h,80);f.canAddNote(_)&&((k=f.clip)==null||k.notes.push(_),f.selectedNote=_,this._dragMode=Y.noteCreation,this._clipEditor.requestUpdate())}_removeNote(n){const h=this._viewModel;h.clip&&h.canDeleteNote(n)&&(h.clip.notes=h.clip.notes.filter(f=>f!==n),h.selectedNote=null,this._dragMode=Y.none,this._clipEditor.requestUpdate())}_beginNoteDrag(n,h){const f=this._viewModel;if(!f.clip)return;const _=n.getPercent(h);f.canEditNotePitch(n)&&(this._dragMode=Y.pitch),_<=f.noteResizeHandleArea?f.canEditNoteStart(n)&&(this._dragMode=Y.noteStart):_>=1-f.noteResizeHandleArea?f.canEditNoteEnd(n)&&(this._dragMode=Y.noteEnd):f.canEditNoteStart(n)&&f.canEditNoteEnd(n)&&(this._dragMode+=Y.noteStart+Y.noteEnd),this._dragMode==Y.noteEnd?this._dragOffset=h-n.end:this._dragOffset=h-n.start,f.selectedNote=n,this._clipEditor.requestUpdate()}}class yl{constructor(n,h){this._isFinished=!1,this._finished=new j.ClockChildFinishedEvent,this._clipEditor=n,this._clipPlayer=h}get clipEditor(){return this._clipEditor}get clipPlayer(){return this._clipPlayer}get ref(){return this._ref}set ref(n){this._ref=n}withRef(n){return this._ref=n,this}get isFinished(){return this._isFinished||this._clipPlayer.isFinished}get finished(){return this._finished}update(n){this._clipEditor.markPlayheadsForUpdate()}finish(){this._isFinished=!0,this.finished.trigger(new j.ClockChildFinishedEventData(this))}}var wl=Object.defineProperty,_l=Object.getOwnPropertyDescriptor,R=(c,n,h,f)=>{for(var _=f>1?void 0:f?_l(n,h):n,k=c.length-1,W;k>=0;k--)(W=c[k])&&(_=(f?W(n,h,_):W(_))||_);return f&&_&&wl(n,h,_),_};let z=class extends el{constructor(){super(),this._viewModel=new bl,this._highlightedPitch=-1,this._playheadUpdateTicker=0,this._svg=hl(),this._svgPoint=null,this._behavior=new ml(this,this._viewModel)}get clip(){return this._viewModel.clip}set clip(c){const n=this._viewModel.clip;this._viewModel.clip=c,this.requestUpdate("clip",n)}get xZoom(){return this._viewModel.xZoom}set xZoom(c){const n=this._viewModel.xZoom;this._viewModel.xZoom=c,this.requestUpdate("xZoom",n)}get yZoom(){return this._viewModel.yZoom}set yZoom(c){const n=this._viewModel.yZoom;this._viewModel.yZoom=c,this.requestUpdate("yZoom",n)}get width(){return this._viewModel.totalWidth}set width(c){const n=this._viewModel.totalWidth;this._viewModel.totalWidth=c,this.requestUpdate("width",n)}get height(){return this._viewModel.totalHeight}set height(c){const n=this._viewModel.totalHeight;this._viewModel.totalHeight=c,this.requestUpdate("height",n)}get beatsPerBar(){return this._viewModel.beatsPerBar}set beatsPerBar(c){const n=this._viewModel.beatsPerBar;this._viewModel.beatsPerBar=Math.max(1,Math.round(c)),this.requestUpdate("beatsPerBar",n)}get divisionsPerBeat(){return this._viewModel.divisionsPerBeat}set divisionsPerBeat(c){const n=this._viewModel.divisionsPerBeat;this._viewModel.divisionsPerBeat=Math.max(1,Math.round(c)),this.requestUpdate("divisionsPerBeat",n)}get snapStrength(){return this._viewModel.snapStrength}set snapStrength(c){const n=this._viewModel.snapStrength;this._viewModel.snapStrength=Math.min(Math.max(0,c),1),this.requestUpdate("snapStrength",n)}get noteResizeHandleArea(){return this._viewModel.noteResizeHandleArea}set noteResizeHandleArea(c){const n=this._viewModel.noteResizeHandleArea;this._viewModel.noteResizeHandleArea=Math.min(Math.max(0,c),1),this.requestUpdate("noteResizeHandleArea",n)}get minPitch(){return this._viewModel.minPitch}set minPitch(c){const n=this._viewModel.minPitch;if(typeof c=="string")try{c=j.pitch(c)}catch{try{c=Number(c)}catch{return}}this._viewModel.minPitch=Math.max(0,Math.round(c)),this.requestUpdate("minPitch",n)}get maxPitch(){return this._viewModel.maxPitch}set maxPitch(c){const n=this._viewModel.maxPitch;if(typeof c=="string")try{c=j.pitch(c)}catch{try{c=Number(c)}catch{return}}this._viewModel.maxPitch=Math.min(127,Math.round(c)),this.requestUpdate("maxPitch",n)}get scale(){return this._viewModel.scale}set scale(c){const n=this._viewModel.scale;this._viewModel.scale=c,this.requestUpdate("scale",n)}get filterPitchesByScale(){return this._viewModel.filterPitchesByScale}set filterPitchesByScale(c){const n=this._viewModel.filterPitchesByScale;this._viewModel.filterPitchesByScale=c,this.requestUpdate("filterPitchesByScale",n)}get customPitchNames(){return this._viewModel.customPitchNames}set customPitchNames(c){const n=this._viewModel.customPitchNames;this._viewModel.customPitchNames=c,this.requestUpdate("customPitchNames",n)}get noteColor(){return this._viewModel.noteColor}set noteColor(c){const n=this._viewModel.noteColor;this._viewModel.noteColor=c,this.requestUpdate("noteColor",n)}get canAddNote(){return this._viewModel.canAddNote}set canAddNote(c){const n=this._viewModel.canAddNote;this._viewModel.canAddNote=c,this.requestUpdate("canAddNote",n)}get canEditNoteStart(){return this._viewModel.canEditNoteStart}set canEditNoteStart(c){const n=this._viewModel.canEditNoteStart;this._viewModel.canEditNoteStart=c,this.requestUpdate("canEditNoteStart",n)}get canEditNoteEnd(){return this._viewModel.canEditNoteEnd}set canEditNoteEnd(c){const n=this._viewModel.canEditNoteEnd;this._viewModel.canEditNoteEnd=c,this.requestUpdate("canEditNoteEnd",n)}get canEditNotePitch(){return this._viewModel.canEditNotePitch}set canEditNotePitch(c){const n=this._viewModel.canEditNotePitch;this._viewModel.canEditNotePitch=c,this.requestUpdate("canEditNotePitch",n)}get canDeleteNote(){return this._viewModel.canDeleteNote}set canDeleteNote(c){const n=this._viewModel.canDeleteNote;this._viewModel.canDeleteNote=c,this.requestUpdate("canDeleteNote",n)}_getCursorPoint(c){const n=this._svg.value,h=this._svgPoint;return!h||!n?{x:-1,y:-1}:(h.x=c.clientX,h.y=c.clientY,h.matrixTransform(n.getScreenCTM().inverse()))}_onMouseDown(c){this._behavior.onMouseDown(this._getCursorPoint(c),c.button)}_onMouseMove(c){const n=this._getCursorPoint(c);this._highlightedPitch=this._viewModel.getPitchFromY(n.y),this._behavior.onMouseMove(n)}_onMouseUp(c){this._behavior.onMouseUp(this._getCursorPoint(c),c.button)}_onMouseLeave(c){this._highlightedPitch=-1,this._behavior.onMouseLeave(this._getCursorPoint(c),c.button)}_onDoubleClick(c){this._behavior.onDoubleClick(this._getCursorPoint(c))}addPlayhead(c){if(c.clip!=this.clip)throw Error("Cannot add a playhead for a clip player that's playing a different clip than the one being edited");const n=new yl(this,c);return this._viewModel.playheads.push(n),n}markPlayheadsForUpdate(){this._playheadUpdateTicker=(this._playheadUpdateTicker+1)%1e4}firstUpdated(){const c=this._svg.value;this._svgPoint=c.createSVGPoint()}render(){const c=this._viewModel;return tl`
            <svg :viewBox="0 0 ${c.totalWidth} ${c.totalHeight}"
                preserveAspectRatio="none" fill="#666666"
                ${fl(this._svg)} class="edit-area"
                @mousedown=${this._onMouseDown}
                @mousemove=${this._onMouseMove}
                @mouseup=${this._onMouseUp}
                @mouseleave=${this._onMouseLeave}
                @dblclick=${this._onDoubleClick}
                width=${c.totalWidth}
                height=${c.totalHeight}>

                <rect x="0" y="0" 
                    width=${c.totalWidth}
                    height=${c.totalHeight}
                    fill="#666"></rect>

                ${this._renderBlackLines()}

                ${this._renderPitchSeparatorLines()}

                ${this._renderBeatLines()}

                ${this._renderPitchNames()}

                ${this._renderNotes()}

                ${this._renderPlayheads()}
            </svg>
        `}_renderBlackLines(){const c=this._viewModel,n=[];for(const h of c.pitches)c.pitchIsBlack(h)&&n.push($e`
                    <rect x="0" y=${c.getYFromPitch(h)}
                        width=${c.totalWidth}
                        height=${c.pitchHeight}
                        fill="#555"></rect>
                `);return n}_renderPitchSeparatorLines(){const c=this._viewModel,n=[];if(c.pitches.length==0)return n;let h=c.pitchIsBlack(c.pitches[0]);for(let f=1;f<c.pitches.length;f++){const _=c.pitches[f],k=c.pitchIsBlack(_);h==k&&n.push($e`
                    <line x1="0" y1=${f*c.pitchHeight}
                        x2=${c.totalWidth} y2=${f*c.pitchHeight}
                        class="pitch-separator-line"/>
                `),h=k}return n}_renderBeatLines(){const c=this._viewModel,n=[];for(const h of c.getBeatLines())n.push($e`
                <line x1=${h.beat*c.beatWidth} y1="0" 
                    x2=${h.beat*c.beatWidth} y2=${c.totalHeight}
                    class=${h.class}/>
            `);return n}_renderPitchNames(){const c=this._viewModel,n=[],h={fontSize:c.pitchHeight-2+"px"};function f(_,k){return $e`
            <text x=${_.beat*c.beatWidth+2}
                  y=${c.getYFromPitch(k)+c.pitchHeight-c.pitchHeight/5}
                  style=${vl(h)}
                  class="pitch-label">
                ${c.getPitchName(k)}
            </text>`}for(const _ of c.getBeatLines().filter(k=>k.beat==0||k.class=="bar-line")){if(!c.customPitchNames)for(const k of c.pitches.filter(W=>W%12==c.scale.root%12&&W!=this._highlightedPitch))n.push(f(_,k));this._highlightedPitch>=0&&n.push(f(_,this._highlightedPitch))}return n}_renderNotes(){var h;const c=this._viewModel,n=[];for(const f of((h=this.clip)==null?void 0:h.notes)??[])n.push($e`
                <rect x=${f.start*c.beatWidth}
                    y=${c.getYFromPitch(f.pitch)}
                    height=${c.pitchHeight}
                    width=${f.duration*c.beatWidth}
                    stroke="black" stroke-width="0.5"
                    fill=${c.noteColor(f,f===c.selectedNote)}></rect>
            `);return n}_renderPlayheads(){const c=this._viewModel,n=[];for(const h of c.playheads){const f=(h.clipPlayer.startBeat+h.clipPlayer.beatsPassed)%this.clip.duration;n.push($e`
                <line x1=${f*c.beatWidth} y1="0" 
                    x2=${f*c.beatWidth} y2=${c.totalHeight}
                    class="playhead"/>
            `)}return n}};z.styles=Kc`
        .edit-area {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -khtml-user-select: none;
            -ms-user-select: none;
        }

        .bar-line {
            stroke: #303030;
            stroke-width: 2;
            stroke-dasharray: 5,0;
        }

        .beat-line {
            stroke: #E0E0E0;
            stroke-width: 1;
            stroke-dasharray: 5,0;
        }

        .division-line {
            stroke: #A0A0A0;
            stroke-width: 1;
            stroke-dasharray: 2,5;
        }

        .pitch-separator-line {
            stroke: #5E5E5E;
            stroke-width: 1;
        }

        .pitch-label {
            fill: #FFFFFF99;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            font-size: 20px;
        }

        .playhead {
            stroke: #F02222;
            stroke-width: 2;
        }
    `;R([O({attribute:!1})],z.prototype,"clip",1);R([O({attribute:"x-zoom",type:Number})],z.prototype,"xZoom",1);R([O({attribute:"y-zoom",type:Number})],z.prototype,"yZoom",1);R([O({attribute:"width",type:Number})],z.prototype,"width",1);R([O({attribute:"height",type:Number})],z.prototype,"height",1);R([O({attribute:"beats-per-bar",type:Number,reflect:!0})],z.prototype,"beatsPerBar",1);R([O({attribute:"divisions-per-beat",type:Number,reflect:!0})],z.prototype,"divisionsPerBeat",1);R([O({attribute:"snap-strength",type:Number,reflect:!0})],z.prototype,"snapStrength",1);R([O({attribute:"note-resize-handle-area",type:Number,reflect:!0})],z.prototype,"noteResizeHandleArea",1);R([O({attribute:"min-pitch",type:String,reflect:!0})],z.prototype,"minPitch",1);R([O({attribute:"max-pitch",type:String,reflect:!0})],z.prototype,"maxPitch",1);R([O({attribute:!1})],z.prototype,"scale",1);R([O({attribute:"filter-pitches-by-scale",type:Boolean})],z.prototype,"filterPitchesByScale",1);R([O({attribute:!1})],z.prototype,"customPitchNames",1);R([O({attribute:!1})],z.prototype,"noteColor",1);R([O({attribute:!1})],z.prototype,"canAddNote",1);R([O({attribute:!1})],z.prototype,"canEditNoteStart",1);R([O({attribute:!1})],z.prototype,"canEditNoteEnd",1);R([O({attribute:!1})],z.prototype,"canEditNotePitch",1);R([O({attribute:!1})],z.prototype,"canDeleteNote",1);R([vn()],z.prototype,"_highlightedPitch",2);R([vn()],z.prototype,"_playheadUpdateTicker",2);z=R([rl("clip-editor")],z);const xl={title:"ClipEditor",tags:["autodocs"],render:c=>{const n=new z;for(const h in c)n[h]=c[h];return n},argTypes:{clip:{control:"none",description:"The shimi.Clip object which the ClipEditor will display and enable editing of."},minPitch:{control:{type:"number",min:0,max:127,step:1},description:"The minimum pitch in the piano roll which the ClipEditor will render."},maxPitch:{control:{type:"number",min:0,max:127,step:1},description:"The maximum pitch in the piano roll which the ClipEditor will render."},xZoom:{control:{type:"number",min:.5,max:2,step:.1},description:"Multiplier to be used when rendering x-coordinates in the component."},yZoom:{control:{type:"number",min:.5,max:2,step:.1},description:"Multiplier to be used when rendering y-coordinates in the component."},width:{control:{type:"number",min:100,max:1e3,step:10},description:"Controls the total width of the component."},height:{control:{type:"number",min:100,max:1e3,step:10},description:"Controls the total height of the component."},beatsPerBar:{control:{type:"number",min:1,max:8,step:1},description:"How many beat lines to render before a bar line occurs"},divisionsPerBeat:{control:{type:"number",min:1,max:8,step:1},description:"How many subdivisions to render per beat. These provide a useful visual cue where each beat divides, as well as note snapping."},snapStrength:{control:{type:"number",min:0,max:1,step:.01},description:"How strongly note starts & ends will snap to beat divisions. Default value = 0.05, meaning that given the distance from one beat division to the next, a note start or end must be within 5% of that distance from the division to snap to it."},noteResizeHandleArea:{control:{type:"number",min:0,max:1,step:.01},description:"How much of the note's area can be grabbed to resize it, rather than to move it. The default value = 0.2, meaning if you grab the left-most 20% of a note, you be resizing it from its start. Alternatively if you grab the right-most 20% of a note, you'd be resizing it from its end."},scale:{control:"none",description:"The scale object to use when getting pitch names."},filterPitchesByScale:{control:"boolean",description:"If true, then only pitches which belong to the currently set scale will be rendered. Other pitches, as well as any notes on those pitches, won't be rendered."},customPitchNames:{control:"none",description:"A Map<number, string> object that maps pitch numbers to pitch names"},noteColor:{control:"none",description:"Function that takes in a shimi.ClipNote object & boolean flag representing whether that note is selected, and returns a string color value."},canAddNote:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if that note would be allowed to be added. If you want to add custom modifications to notes added through the UI, this can also be a good place to do so."},canEditNoteStart:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the start of the note would be allowed to be altered."},canEditNoteEnd:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the end of the note would be allowed to be altered."},canEditNotePitch:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the pitch of the note would be allowed to be altered."},canDeleteNote:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the note would be allowed to be removed from the clip."}}};function J(){return new j.Clip(8).addNote([0,1],1,"C4",80).addNote([2,3],1,"G4",80).addNote([4,5],1,"A4",80).addNote([6,7],1,"G4",80)}function Pl(){return new j.Clip(8).addNote(0,.5,"C4",80,0).addNote(.5,.5,"D4",80,1).addNote(1,.5,"E4",80,2).addNote(1.5,.5,"F4",80,3).addNote(2,.5,"G4",80,4).addNote(2.5,.5,"A4",80,5).addNote(3,.5,"B4",80,6).addNote(3.5,.5,"C5",80,7).addNote(4,.5,"B4",80,8).addNote(4.5,.5,"A4",80,9).addNote(5,.5,"G4",80,10).addNote(5.5,.5,"F4",80,11).addNote(6,.5,"E4",80,12).addNote(6.5,.5,"D4",80,13).addNote(7,1,"C4",80,14)}const Oe={args:{clip:J(),minPitch:55,maxPitch:79}},Ue={args:{}},qe={args:{clip:J(),minPitch:60,maxPitch:72,xZoom:.6,yZoom:1.5}},Ie={args:{clip:J(),minPitch:60,maxPitch:72,width:500,height:500}},We={args:{clip:J(),minPitch:60,maxPitch:72,beatsPerBar:3,divisionsPerBeat:5}},Ze={args:{clip:J(),minPitch:60,maxPitch:72,snapStrength:.5}},Ve={args:{clip:J(),minPitch:60,maxPitch:72,noteResizeHandleArea:0}},Ye={args:{clip:J(),minPitch:55,maxPitch:79,scale:j.ScaleTemplate.major.create("Gb")}},je={args:{clip:J(),minPitch:55,maxPitch:79,scale:j.ScaleTemplate.major.create("G"),filterPitchesByScale:!0}},Xe={args:{clip:J(),minPitch:24,maxPitch:35,customPitchNames:new Map().set(24,"A").set(25,"B").set(26,"C").set(27,"D").set(28,"E").set(29,"F").set(30,"G").set(31,"H").set(32,"I").set(33,"J").set(34,"K").set(35,"L")}},Je={args:{clip:Pl(),minPitch:60,maxPitch:72}},Qe={args:{clip:new j.Clip(8),minPitch:60,maxPitch:72,canAddNote:c=>c.pitch<67}},Ke={args:{clip:J(),minPitch:60,maxPitch:72,canEditNoteStart:c=>c.start<4}},et={args:{clip:J(),minPitch:60,maxPitch:72,canEditNoteEnd:c=>c.pitch>65}},tt={args:{clip:J(),minPitch:60,maxPitch:72,canEditNotePitch:c=>c.start<4}},rt={args:{clip:J(),minPitch:60,maxPitch:72,canDeleteNote:c=>!1}},at={args:{clip:J(),minPitch:60,maxPitch:72},play:async({canvasElement:c})=>{const n=c.children.item(0),h=new j.Clock,f=h.addChild(new j.Metronome(120)),_=new j.MidiBus,k=h.addChild(new j.ClipPlayer(n.clip,f,_));k.beatCount=n.clip.duration,h.addChild(n.addPlayhead(k)),h.start()}};var ga,ba,ma;Oe.parameters={...Oe.parameters,docs:{...(ga=Oe.parameters)==null?void 0:ga.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 55,
    maxPitch: 79
  }
}`,...(ma=(ba=Oe.parameters)==null?void 0:ba.docs)==null?void 0:ma.source}}};var ya,wa,_a;Ue.parameters={...Ue.parameters,docs:{...(ya=Ue.parameters)==null?void 0:ya.docs,source:{originalSource:`{
  args: {}
}`,...(_a=(wa=Ue.parameters)==null?void 0:wa.docs)==null?void 0:_a.source}}};var Pa,ka,$a;qe.parameters={...qe.parameters,docs:{...(Pa=qe.parameters)==null?void 0:Pa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    xZoom: 0.6,
    yZoom: 1.5
  }
}`,...($a=(ka=qe.parameters)==null?void 0:ka.docs)==null?void 0:$a.source}}};var Na,Ma,Ca;Ie.parameters={...Ie.parameters,docs:{...(Na=Ie.parameters)==null?void 0:Na.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    width: 500,
    height: 500
  }
}`,...(Ca=(Ma=Ie.parameters)==null?void 0:Ma.docs)==null?void 0:Ca.source}}};var xa,Ea,Ba;We.parameters={...We.parameters,docs:{...(xa=We.parameters)==null?void 0:xa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    beatsPerBar: 3,
    divisionsPerBeat: 5
  }
}`,...(Ba=(Ea=We.parameters)==null?void 0:Ea.docs)==null?void 0:Ba.source}}};var Aa,Sa,Fa;Ze.parameters={...Ze.parameters,docs:{...(Aa=Ze.parameters)==null?void 0:Aa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    snapStrength: 0.5
  }
}`,...(Fa=(Sa=Ze.parameters)==null?void 0:Sa.docs)==null?void 0:Fa.source}}};var Ta,Da,Ha;Ve.parameters={...Ve.parameters,docs:{...(Ta=Ve.parameters)==null?void 0:Ta.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    noteResizeHandleArea: 0
  }
}`,...(Ha=(Da=Ve.parameters)==null?void 0:Da.docs)==null?void 0:Ha.source}}};var za,Ra,La;Ye.parameters={...Ye.parameters,docs:{...(za=Ye.parameters)==null?void 0:za.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 55,
    maxPitch: 79,
    scale: ScaleTemplate.major.create('Gb')
  }
}`,...(La=(Ra=Ye.parameters)==null?void 0:Ra.docs)==null?void 0:La.source}}};var Ga,Oa,Ua;je.parameters={...je.parameters,docs:{...(Ga=je.parameters)==null?void 0:Ga.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 55,
    maxPitch: 79,
    scale: ScaleTemplate.major.create('G'),
    filterPitchesByScale: true
  }
}`,...(Ua=(Oa=je.parameters)==null?void 0:Oa.docs)==null?void 0:Ua.source}}};var qa,Ia,Wa;Xe.parameters={...Xe.parameters,docs:{...(qa=Xe.parameters)==null?void 0:qa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 24,
    maxPitch: 35,
    customPitchNames: new Map<number, string>().set(24, 'A').set(25, 'B').set(26, 'C').set(27, 'D').set(28, 'E').set(29, 'F').set(30, 'G').set(31, 'H').set(32, 'I').set(33, 'J').set(34, 'K').set(35, 'L')
  }
}`,...(Wa=(Ia=Xe.parameters)==null?void 0:Ia.docs)==null?void 0:Wa.source}}};var Za,Va,Ya;Je.parameters={...Je.parameters,docs:{...(Za=Je.parameters)==null?void 0:Za.docs,source:{originalSource:`{
  args: {
    clip: multiChannelClip(),
    minPitch: 60,
    maxPitch: 72
  }
}`,...(Ya=(Va=Je.parameters)==null?void 0:Va.docs)==null?void 0:Ya.source}}};var ja,Xa,Ja;Qe.parameters={...Qe.parameters,docs:{...(ja=Qe.parameters)==null?void 0:ja.docs,source:{originalSource:`{
  args: {
    clip: new Clip(8),
    minPitch: 60,
    maxPitch: 72,
    canAddNote: n => n.pitch < 67
  }
}`,...(Ja=(Xa=Qe.parameters)==null?void 0:Xa.docs)==null?void 0:Ja.source}}};var Qa,Ka,en;Ke.parameters={...Ke.parameters,docs:{...(Qa=Ke.parameters)==null?void 0:Qa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canEditNoteStart: n => n.start < 4
  }
}`,...(en=(Ka=Ke.parameters)==null?void 0:Ka.docs)==null?void 0:en.source}}};var tn,rn,an;et.parameters={...et.parameters,docs:{...(tn=et.parameters)==null?void 0:tn.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canEditNoteEnd: n => n.pitch > 65
  }
}`,...(an=(rn=et.parameters)==null?void 0:rn.docs)==null?void 0:an.source}}};var nn,on,sn;tt.parameters={...tt.parameters,docs:{...(nn=tt.parameters)==null?void 0:nn.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canEditNotePitch: n => n.start < 4
  }
}`,...(sn=(on=tt.parameters)==null?void 0:on.docs)==null?void 0:sn.source}}};var cn,ln,hn;rt.parameters={...rt.parameters,docs:{...(cn=rt.parameters)==null?void 0:cn.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canDeleteNote: n => false
  }
}`,...(hn=(ln=rt.parameters)==null?void 0:ln.docs)==null?void 0:hn.source}}};var un,fn,dn;at.parameters={...at.parameters,docs:{...(un=at.parameters)==null?void 0:un.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72
  },
  play: async ({
    canvasElement
  }) => {
    const editor = (canvasElement.children.item(0) as ClipEditor);
    const clock = new Clock();
    const metronome = (clock.addChild(new Metronome(120)) as Metronome);
    const midiOut = new MidiBus();
    const clipPlayer = (clock.addChild(new ClipPlayer(editor.clip, metronome, midiOut)) as ClipPlayer);
    clipPlayer.beatCount = editor.clip.duration;
    clock.addChild(editor.addPlayhead(clipPlayer));
    clock.start();
  }
}`,...(dn=(fn=at.parameters)==null?void 0:fn.docs)==null?void 0:dn.source}}};const El=["Primary","NoClip","XAndYZoom","WidthAndHeight","BeatsPerBarAndDivisionsPerBeat","HighSnapStrength","NoNoteResizeHandleArea","WithScaleSet","FilterPitchesByScale","CustomPitchNaming","DefaultNoteColoring","CanOnlyAddNotesBelowG4","CanOnlyEditNoteStartBeforeBeat4","CanOnlyEditNoteEndAboveF4","CanOnlyEditNotePitchBeforeBeat4","CantDeleteNotes","Playhead"];export{We as BeatsPerBarAndDivisionsPerBeat,Qe as CanOnlyAddNotesBelowG4,et as CanOnlyEditNoteEndAboveF4,tt as CanOnlyEditNotePitchBeforeBeat4,Ke as CanOnlyEditNoteStartBeforeBeat4,rt as CantDeleteNotes,Xe as CustomPitchNaming,Je as DefaultNoteColoring,je as FilterPitchesByScale,Ze as HighSnapStrength,Ue as NoClip,Ve as NoNoteResizeHandleArea,at as Playhead,Oe as Primary,Ie as WidthAndHeight,Ye as WithScaleSet,qe as XAndYZoom,El as __namedExportsOrder,xl as default};
