import{A as va,T as Yl,i as jl,s as Xl,x as Ql,b as Pe}from"./lit-element-3795bd65.js";import{d as j,n as O,t as hn,e as Jl}from"./index-88dafb31.js";import{e as Kl}from"./directive-helpers-cd0fa6f2.js";import{c as ec,g as tc}from"./_commonjsHelpers-725317a4.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const un={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},fn=l=>(...n)=>({_$litDirective$:l,values:n});let dn=class{constructor(n){}get _$AU(){return this._$AM._$AU}_$AT(n,h,f){this._$Ct=n,this._$AM=h,this._$Ci=f}_$AS(n,h){return this.update(n,h)}update(n,h){return this.render(...h)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ee=(l,n)=>{var h,f;const _=l._$AN;if(_===void 0)return!1;for(const k of _)(f=(h=k)._$AO)===null||f===void 0||f.call(h,n,!1),Ee(k,n);return!0},at=l=>{let n,h;do{if((n=l._$AM)===void 0)break;h=n._$AN,h.delete(l),l=n}while((h==null?void 0:h.size)===0)},vn=l=>{for(let n;n=l._$AM;l=n){let h=n._$AN;if(h===void 0)n._$AN=h=new Set;else if(h.has(l))break;h.add(l),nc(n)}};function rc(l){this._$AN!==void 0?(at(this),this._$AM=l,vn(this)):this._$AM=l}function ac(l,n=!1,h=0){const f=this._$AH,_=this._$AN;if(_!==void 0&&_.size!==0)if(n)if(Array.isArray(f))for(let k=h;k<f.length;k++)Ee(f[k],!1),at(f[k]);else f!=null&&(Ee(f,!1),at(f));else Ee(this,l)}const nc=l=>{var n,h,f,_;l.type==un.CHILD&&((n=(f=l)._$AP)!==null&&n!==void 0||(f._$AP=ac),(h=(_=l)._$AQ)!==null&&h!==void 0||(_._$AQ=rc))};class ic extends dn{constructor(){super(...arguments),this._$AN=void 0}_$AT(n,h,f){super._$AT(n,h,f),vn(this),this.isConnected=n._$AU}_$AO(n,h=!0){var f,_;n!==this.isConnected&&(this.isConnected=n,n?(f=this.reconnected)===null||f===void 0||f.call(this):(_=this.disconnected)===null||_===void 0||_.call(this)),h&&(Ee(this,n),at(this))}setValue(n){if(Kl(this._$Ct))this._$Ct._$AI(n,this);else{const h=[...this._$Ct._$AH];h[this._$Ci]=n,this._$Ct._$AI(h,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oc=()=>new sc;let sc=class{};const Tt=new WeakMap,lc=fn(class extends ic{render(l){return va}update(l,[n]){var h;const f=n!==this.G;return f&&this.G!==void 0&&this.ot(void 0),(f||this.rt!==this.lt)&&(this.G=n,this.dt=(h=l.options)===null||h===void 0?void 0:h.host,this.ot(this.lt=l.element)),va}ot(l){var n;if(typeof this.G=="function"){const h=(n=this.dt)!==null&&n!==void 0?n:globalThis;let f=Tt.get(h);f===void 0&&(f=new WeakMap,Tt.set(h,f)),f.get(this.G)!==void 0&&this.G.call(this.dt,void 0),f.set(this.G,l),l!==void 0&&this.G.call(this.dt,l)}else this.G.value=l}get rt(){var l,n,h;return typeof this.G=="function"?(n=Tt.get((l=this.dt)!==null&&l!==void 0?l:globalThis))===null||n===void 0?void 0:n.get(this.G):(h=this.G)===null||h===void 0?void 0:h.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pn="important",cc=" !"+pn,hc=fn(class extends dn{constructor(l){var n;if(super(l),l.type!==un.ATTRIBUTE||l.name!=="style"||((n=l.strings)===null||n===void 0?void 0:n.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(l){return Object.keys(l).reduce((n,h)=>{const f=l[h];return f==null?n:n+`${h=h.includes("-")?h:h.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${f};`},"")}update(l,[n]){const{style:h}=l.element;if(this.ht===void 0){this.ht=new Set;for(const f in n)this.ht.add(f);return this.render(n)}this.ht.forEach(f=>{n[f]==null&&(this.ht.delete(f),f.includes("-")?h.removeProperty(f):h[f]="")});for(const f in n){const _=n[f];if(_!=null){this.ht.add(f);const k=typeof _=="string"&&_.endsWith(cc);f.includes("-")||k?h.setProperty(f,k?_.slice(0,-11):_,k?pn:""):h[f]=_}}return Yl}});var gn={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(l,n){(function(h,f){l.exports=f()})(ec,function(){for(var h=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e<t?t:e>r?r:e},f=h,_=function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=f(e[t],0,255)):t===3&&(e[t]=f(e[t],0,1));return e},k={},W=0,ne=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];W<ne.length;W+=1){var ce=ne[W];k["[object "+ce+"]"]=ce.toLowerCase()}var Ae=function(e){return k[Object.prototype.toString.call(e)]||"object"},bn=Ae,mn=function(e,t){return t===void 0&&(t=null),e.length>=3?Array.prototype.slice.call(e):bn(e[0])=="object"&&t?t.split("").filter(function(r){return e[0][r]!==void 0}).map(function(r){return e[0][r]}):e[0]},yn=Ae,wn=function(e){if(e.length<2)return null;var t=e.length-1;return yn(e[t])=="string"?e[t].toLowerCase():null},Ne=Math.PI,b={clip_rgb:_,limit:h,type:Ae,unpack:mn,last:wn,PI:Ne,TWOPI:Ne*2,PITHIRD:Ne/3,DEG2RAD:Ne/180,RAD2DEG:180/Ne},U={format:{},autodetect:[]},_n=b.last,$n=b.clip_rgb,Dt=b.type,he=U,zt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var a=this;if(Dt(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var o=_n(t),s=!1;if(!o){s=!0,he.sorted||(he.autodetect=he.autodetect.sort(function(v,m){return m.p-v.p}),he.sorted=!0);for(var i=0,c=he.autodetect;i<c.length;i+=1){var u=c[i];if(o=u.test.apply(u,t),o)break}}if(he.format[o]){var d=he.format[o].apply(null,s?t:t.slice(0,-1));a._rgb=$n(d)}else throw new Error("unknown format: "+t);a._rgb.length===3&&a._rgb.push(1)};zt.prototype.toString=function(){return Dt(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var P=zt,Be=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Be.Color,[null].concat(e)))};Be.Color=P,Be.version="2.4.2";var L=Be,kn=b.unpack,Ht=Math.max,Pn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=kn(e,"rgb"),a=r[0],o=r[1],s=r[2];a=a/255,o=o/255,s=s/255;var i=1-Ht(a,Ht(o,s)),c=i<1?1/(1-i):0,u=(1-a-i)*c,d=(1-o-i)*c,v=(1-s-i)*c;return[u,d,v,i]},Nn=Pn,Mn=b.unpack,Cn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Mn(e,"cmyk");var r=e[0],a=e[1],o=e[2],s=e[3],i=e.length>4?e[4]:1;return s===1?[0,0,0,i]:[r>=1?0:255*(1-r)*(1-s),a>=1?0:255*(1-a)*(1-s),o>=1?0:255*(1-o)*(1-s),i]},xn=Cn,En=L,Rt=P,Lt=U,An=b.unpack,Bn=b.type,Sn=Nn;Rt.prototype.cmyk=function(){return Sn(this._rgb)},En.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Rt,[null].concat(e,["cmyk"])))},Lt.format.cmyk=xn,Lt.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=An(e,"cmyk"),Bn(e)==="array"&&e.length===4)return"cmyk"}});var Fn=b.unpack,Tn=b.last,nt=function(e){return Math.round(e*100)/100},Dn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Fn(e,"hsla"),a=Tn(e)||"lsa";return r[0]=nt(r[0]||0),r[1]=nt(r[1]*100)+"%",r[2]=nt(r[2]*100)+"%",a==="hsla"||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,a="hsla"):r.length=3,a+"("+r.join(",")+")"},zn=Dn,Hn=b.unpack,Rn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Hn(e,"rgba");var r=e[0],a=e[1],o=e[2];r/=255,a/=255,o/=255;var s=Math.min(r,a,o),i=Math.max(r,a,o),c=(i+s)/2,u,d;return i===s?(u=0,d=Number.NaN):u=c<.5?(i-s)/(i+s):(i-s)/(2-i-s),r==i?d=(a-o)/(i-s):a==i?d=2+(o-r)/(i-s):o==i&&(d=4+(r-a)/(i-s)),d*=60,d<0&&(d+=360),e.length>3&&e[3]!==void 0?[d,u,c,e[3]]:[d,u,c]},Gt=Rn,Ln=b.unpack,Gn=b.last,On=zn,Un=Gt,it=Math.round,qn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Ln(e,"rgba"),a=Gn(e)||"rgb";return a.substr(0,3)=="hsl"?On(Un(r),a):(r[0]=it(r[0]),r[1]=it(r[1]),r[2]=it(r[2]),(a==="rgba"||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,a="rgba"),a+"("+r.slice(0,a==="rgb"?3:4).join(",")+")")},In=qn,Wn=b.unpack,ot=Math.round,Zn=function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];t=Wn(t,"hsl");var a=t[0],o=t[1],s=t[2],i,c,u;if(o===0)i=c=u=s*255;else{var d=[0,0,0],v=[0,0,0],m=s<.5?s*(1+o):s+o-s*o,p=2*s-m,w=a/360;d[0]=w+1/3,d[1]=w,d[2]=w-1/3;for(var y=0;y<3;y++)d[y]<0&&(d[y]+=1),d[y]>1&&(d[y]-=1),6*d[y]<1?v[y]=p+(m-p)*6*d[y]:2*d[y]<1?v[y]=m:3*d[y]<2?v[y]=p+(m-p)*(2/3-d[y])*6:v[y]=p;e=[ot(v[0]*255),ot(v[1]*255),ot(v[2]*255)],i=e[0],c=e[1],u=e[2]}return t.length>3?[i,c,u,t[3]]:[i,c,u,1]},Ot=Zn,Ut=Ot,qt=U,It=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Wt=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Zt=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Vt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Yt=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,jt=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Xt=Math.round,Qt=function(e){e=e.toLowerCase().trim();var t;if(qt.format.named)try{return qt.format.named(e)}catch{}if(t=e.match(It)){for(var r=t.slice(1,4),a=0;a<3;a++)r[a]=+r[a];return r[3]=1,r}if(t=e.match(Wt)){for(var o=t.slice(1,5),s=0;s<4;s++)o[s]=+o[s];return o}if(t=e.match(Zt)){for(var i=t.slice(1,4),c=0;c<3;c++)i[c]=Xt(i[c]*2.55);return i[3]=1,i}if(t=e.match(Vt)){for(var u=t.slice(1,5),d=0;d<3;d++)u[d]=Xt(u[d]*2.55);return u[3]=+u[3],u}if(t=e.match(Yt)){var v=t.slice(1,4);v[1]*=.01,v[2]*=.01;var m=Ut(v);return m[3]=1,m}if(t=e.match(jt)){var p=t.slice(1,4);p[1]*=.01,p[2]*=.01;var w=Ut(p);return w[3]=+t[4],w}};Qt.test=function(e){return It.test(e)||Wt.test(e)||Zt.test(e)||Vt.test(e)||Yt.test(e)||jt.test(e)};var Vn=Qt,Yn=L,Jt=P,Kt=U,jn=b.type,Xn=In,er=Vn;Jt.prototype.css=function(e){return Xn(this._rgb,e)},Yn.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Jt,[null].concat(e,["css"])))},Kt.format.css=er,Kt.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&jn(e)==="string"&&er.test(e))return"css"}});var tr=P,Qn=L,Jn=U,Kn=b.unpack;Jn.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Kn(e,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},Qn.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(tr,[null].concat(e,["gl"])))},tr.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var ei=b.unpack,ti=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ei(e,"rgb"),a=r[0],o=r[1],s=r[2],i=Math.min(a,o,s),c=Math.max(a,o,s),u=c-i,d=u*100/255,v=i/(255-u)*100,m;return u===0?m=Number.NaN:(a===c&&(m=(o-s)/u),o===c&&(m=2+(s-a)/u),s===c&&(m=4+(a-o)/u),m*=60,m<0&&(m+=360)),[m,d,v]},ri=ti,ai=b.unpack,ni=Math.floor,ii=function(){for(var e,t,r,a,o,s,i=[],c=arguments.length;c--;)i[c]=arguments[c];i=ai(i,"hcg");var u=i[0],d=i[1],v=i[2],m,p,w;v=v*255;var y=d*255;if(d===0)m=p=w=v;else{u===360&&(u=0),u>360&&(u-=360),u<0&&(u+=360),u/=60;var N=ni(u),x=u-N,A=v*(1-d),S=A+y*(1-x),Z=A+y*x,I=A+y;switch(N){case 0:e=[I,Z,A],m=e[0],p=e[1],w=e[2];break;case 1:t=[S,I,A],m=t[0],p=t[1],w=t[2];break;case 2:r=[A,I,Z],m=r[0],p=r[1],w=r[2];break;case 3:a=[A,S,I],m=a[0],p=a[1],w=a[2];break;case 4:o=[Z,A,I],m=o[0],p=o[1],w=o[2];break;case 5:s=[I,A,S],m=s[0],p=s[1],w=s[2];break}}return[m,p,w,i.length>3?i[3]:1]},oi=ii,si=b.unpack,li=b.type,ci=L,rr=P,ar=U,hi=ri;rr.prototype.hcg=function(){return hi(this._rgb)},ci.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(rr,[null].concat(e,["hcg"])))},ar.format.hcg=oi,ar.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=si(e,"hcg"),li(e)==="array"&&e.length===3)return"hcg"}});var ui=b.unpack,fi=b.last,Se=Math.round,di=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ui(e,"rgba"),a=r[0],o=r[1],s=r[2],i=r[3],c=fi(e)||"auto";i===void 0&&(i=1),c==="auto"&&(c=i<1?"rgba":"rgb"),a=Se(a),o=Se(o),s=Se(s);var u=a<<16|o<<8|s,d="000000"+u.toString(16);d=d.substr(d.length-6);var v="0"+Se(i*255).toString(16);switch(v=v.substr(v.length-2),c.toLowerCase()){case"rgba":return"#"+d+v;case"argb":return"#"+v+d;default:return"#"+d}},nr=di,vi=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,pi=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,gi=function(e){if(e.match(vi)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16),r=t>>16,a=t>>8&255,o=t&255;return[r,a,o,1]}if(e.match(pi)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var s=parseInt(e,16),i=s>>24&255,c=s>>16&255,u=s>>8&255,d=Math.round((s&255)/255*100)/100;return[i,c,u,d]}throw new Error("unknown hex color: "+e)},ir=gi,bi=L,or=P,mi=b.type,sr=U,yi=nr;or.prototype.hex=function(e){return yi(this._rgb,e)},bi.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(or,[null].concat(e,["hex"])))},sr.format.hex=ir,sr.autodetect.push({p:4,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&mi(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var wi=b.unpack,lr=b.TWOPI,_i=Math.min,$i=Math.sqrt,ki=Math.acos,Pi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=wi(e,"rgb"),a=r[0],o=r[1],s=r[2];a/=255,o/=255,s/=255;var i,c=_i(a,o,s),u=(a+o+s)/3,d=u>0?1-c/u:0;return d===0?i=NaN:(i=(a-o+(a-s))/2,i/=$i((a-o)*(a-o)+(a-s)*(o-s)),i=ki(i),s>o&&(i=lr-i),i/=lr),[i*360,d,u]},Ni=Pi,Mi=b.unpack,st=b.limit,ve=b.TWOPI,lt=b.PITHIRD,pe=Math.cos,Ci=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Mi(e,"hsi");var r=e[0],a=e[1],o=e[2],s,i,c;return isNaN(r)&&(r=0),isNaN(a)&&(a=0),r>360&&(r-=360),r<0&&(r+=360),r/=360,r<1/3?(c=(1-a)/3,s=(1+a*pe(ve*r)/pe(lt-ve*r))/3,i=1-(c+s)):r<2/3?(r-=1/3,s=(1-a)/3,i=(1+a*pe(ve*r)/pe(lt-ve*r))/3,c=1-(s+i)):(r-=2/3,i=(1-a)/3,c=(1+a*pe(ve*r)/pe(lt-ve*r))/3,s=1-(i+c)),s=st(o*s*3),i=st(o*i*3),c=st(o*c*3),[s*255,i*255,c*255,e.length>3?e[3]:1]},xi=Ci,Ei=b.unpack,Ai=b.type,Bi=L,cr=P,hr=U,Si=Ni;cr.prototype.hsi=function(){return Si(this._rgb)},Bi.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(cr,[null].concat(e,["hsi"])))},hr.format.hsi=xi,hr.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ei(e,"hsi"),Ai(e)==="array"&&e.length===3)return"hsi"}});var Fi=b.unpack,Ti=b.type,Di=L,ur=P,fr=U,zi=Gt;ur.prototype.hsl=function(){return zi(this._rgb)},Di.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ur,[null].concat(e,["hsl"])))},fr.format.hsl=Ot,fr.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Fi(e,"hsl"),Ti(e)==="array"&&e.length===3)return"hsl"}});var Hi=b.unpack,Ri=Math.min,Li=Math.max,Gi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Hi(e,"rgb");var r=e[0],a=e[1],o=e[2],s=Ri(r,a,o),i=Li(r,a,o),c=i-s,u,d,v;return v=i/255,i===0?(u=Number.NaN,d=0):(d=c/i,r===i&&(u=(a-o)/c),a===i&&(u=2+(o-r)/c),o===i&&(u=4+(r-a)/c),u*=60,u<0&&(u+=360)),[u,d,v]},Oi=Gi,Ui=b.unpack,qi=Math.floor,Ii=function(){for(var e,t,r,a,o,s,i=[],c=arguments.length;c--;)i[c]=arguments[c];i=Ui(i,"hsv");var u=i[0],d=i[1],v=i[2],m,p,w;if(v*=255,d===0)m=p=w=v;else{u===360&&(u=0),u>360&&(u-=360),u<0&&(u+=360),u/=60;var y=qi(u),N=u-y,x=v*(1-d),A=v*(1-d*N),S=v*(1-d*(1-N));switch(y){case 0:e=[v,S,x],m=e[0],p=e[1],w=e[2];break;case 1:t=[A,v,x],m=t[0],p=t[1],w=t[2];break;case 2:r=[x,v,S],m=r[0],p=r[1],w=r[2];break;case 3:a=[x,A,v],m=a[0],p=a[1],w=a[2];break;case 4:o=[S,x,v],m=o[0],p=o[1],w=o[2];break;case 5:s=[v,x,A],m=s[0],p=s[1],w=s[2];break}}return[m,p,w,i.length>3?i[3]:1]},Wi=Ii,Zi=b.unpack,Vi=b.type,Yi=L,dr=P,vr=U,ji=Oi;dr.prototype.hsv=function(){return ji(this._rgb)},Yi.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(dr,[null].concat(e,["hsv"])))},vr.format.hsv=Wi,vr.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Zi(e,"hsv"),Vi(e)==="array"&&e.length===3)return"hsv"}});var Fe={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ge=Fe,Xi=b.unpack,pr=Math.pow,Qi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Xi(e,"rgb"),a=r[0],o=r[1],s=r[2],i=Ji(a,o,s),c=i[0],u=i[1],d=i[2],v=116*u-16;return[v<0?0:v,500*(c-u),200*(u-d)]},ct=function(e){return(e/=255)<=.04045?e/12.92:pr((e+.055)/1.055,2.4)},ht=function(e){return e>ge.t3?pr(e,1/3):e/ge.t2+ge.t0},Ji=function(e,t,r){e=ct(e),t=ct(t),r=ct(r);var a=ht((.4124564*e+.3575761*t+.1804375*r)/ge.Xn),o=ht((.2126729*e+.7151522*t+.072175*r)/ge.Yn),s=ht((.0193339*e+.119192*t+.9503041*r)/ge.Zn);return[a,o,s]},gr=Qi,be=Fe,Ki=b.unpack,eo=Math.pow,to=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=Ki(e,"lab");var r=e[0],a=e[1],o=e[2],s,i,c,u,d,v;return i=(r+16)/116,s=isNaN(a)?i:i+a/500,c=isNaN(o)?i:i-o/200,i=be.Yn*ft(i),s=be.Xn*ft(s),c=be.Zn*ft(c),u=ut(3.2404542*s-1.5371385*i-.4985314*c),d=ut(-.969266*s+1.8760108*i+.041556*c),v=ut(.0556434*s-.2040259*i+1.0572252*c),[u,d,v,e.length>3?e[3]:1]},ut=function(e){return 255*(e<=.00304?12.92*e:1.055*eo(e,1/2.4)-.055)},ft=function(e){return e>be.t1?e*e*e:be.t2*(e-be.t0)},br=to,ro=b.unpack,ao=b.type,no=L,mr=P,yr=U,io=gr;mr.prototype.lab=function(){return io(this._rgb)},no.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(mr,[null].concat(e,["lab"])))},yr.format.lab=br,yr.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ro(e,"lab"),ao(e)==="array"&&e.length===3)return"lab"}});var oo=b.unpack,so=b.RAD2DEG,lo=Math.sqrt,co=Math.atan2,ho=Math.round,uo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=oo(e,"lab"),a=r[0],o=r[1],s=r[2],i=lo(o*o+s*s),c=(co(s,o)*so+360)%360;return ho(i*1e4)===0&&(c=Number.NaN),[a,i,c]},wr=uo,fo=b.unpack,vo=gr,po=wr,go=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=fo(e,"rgb"),a=r[0],o=r[1],s=r[2],i=vo(a,o,s),c=i[0],u=i[1],d=i[2];return po(c,u,d)},bo=go,mo=b.unpack,yo=b.DEG2RAD,wo=Math.sin,_o=Math.cos,$o=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=mo(e,"lch"),a=r[0],o=r[1],s=r[2];return isNaN(s)&&(s=0),s=s*yo,[a,_o(s)*o,wo(s)*o]},_r=$o,ko=b.unpack,Po=_r,No=br,Mo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=ko(e,"lch");var r=e[0],a=e[1],o=e[2],s=Po(r,a,o),i=s[0],c=s[1],u=s[2],d=No(i,c,u),v=d[0],m=d[1],p=d[2];return[v,m,p,e.length>3?e[3]:1]},$r=Mo,Co=b.unpack,xo=$r,Eo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Co(e,"hcl").reverse();return xo.apply(void 0,r)},Ao=Eo,Bo=b.unpack,So=b.type,kr=L,Te=P,dt=U,Pr=bo;Te.prototype.lch=function(){return Pr(this._rgb)},Te.prototype.hcl=function(){return Pr(this._rgb).reverse()},kr.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Te,[null].concat(e,["lch"])))},kr.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Te,[null].concat(e,["hcl"])))},dt.format.lch=$r,dt.format.hcl=Ao,["lch","hcl"].forEach(function(e){return dt.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=Bo(t,e),So(t)==="array"&&t.length===3)return e}})});var Fo={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Nr=Fo,To=P,Mr=U,Do=b.type,Me=Nr,zo=ir,Ho=nr;To.prototype.name=function(){for(var e=Ho(this._rgb,"rgb"),t=0,r=Object.keys(Me);t<r.length;t+=1){var a=r[t];if(Me[a]===e)return a.toLowerCase()}return e},Mr.format.named=function(e){if(e=e.toLowerCase(),Me[e])return zo(Me[e]);throw new Error("unknown color name: "+e)},Mr.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&Do(e)==="string"&&Me[e.toLowerCase()])return"named"}});var Ro=b.unpack,Lo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Ro(e,"rgb"),a=r[0],o=r[1],s=r[2];return(a<<16)+(o<<8)+s},Go=Lo,Oo=b.type,Uo=function(e){if(Oo(e)=="number"&&e>=0&&e<=16777215){var t=e>>16,r=e>>8&255,a=e&255;return[t,r,a,1]}throw new Error("unknown num color: "+e)},qo=Uo,Io=L,Cr=P,xr=U,Wo=b.type,Zo=Go;Cr.prototype.num=function(){return Zo(this._rgb)},Io.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Cr,[null].concat(e,["num"])))},xr.format.num=qo,xr.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e.length===1&&Wo(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});var Vo=L,vt=P,Er=U,Ar=b.unpack,Br=b.type,Sr=Math.round;vt.prototype.rgb=function(e){return e===void 0&&(e=!0),e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Sr)},vt.prototype.rgba=function(e){return e===void 0&&(e=!0),this._rgb.slice(0,4).map(function(t,r){return r<3?e===!1?t:Sr(t):t})},Vo.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(vt,[null].concat(e,["rgb"])))},Er.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Ar(e,"rgba");return r[3]===void 0&&(r[3]=1),r},Er.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ar(e,"rgba"),Br(e)==="array"&&(e.length===3||e.length===4&&Br(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});var De=Math.log,Yo=function(e){var t=e/100,r,a,o;return t<66?(r=255,a=t<6?0:-155.25485562709179-.44596950469579133*(a=t-2)+104.49216199393888*De(a),o=t<20?0:-254.76935184120902+.8274096064007395*(o=t-10)+115.67994401066147*De(o)):(r=351.97690566805693+.114206453784165*(r=t-55)-40.25366309332127*De(r),a=325.4494125711974+.07943456536662342*(a=t-50)-28.0852963507957*De(a),o=255),[r,a,o,1]},Fr=Yo,jo=Fr,Xo=b.unpack,Qo=Math.round,Jo=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r=Xo(e,"rgb"),a=r[0],o=r[2],s=1e3,i=4e4,c=.4,u;i-s>c;){u=(i+s)*.5;var d=jo(u);d[2]/d[0]>=o/a?i=u:s=u}return Qo(u)},Ko=Jo,pt=L,ze=P,gt=U,es=Ko;ze.prototype.temp=ze.prototype.kelvin=ze.prototype.temperature=function(){return es(this._rgb)},pt.temp=pt.kelvin=pt.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ze,[null].concat(e,["temp"])))},gt.format.temp=gt.format.kelvin=gt.format.temperature=Fr;var ts=b.unpack,bt=Math.cbrt,rs=Math.pow,as=Math.sign,ns=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ts(e,"rgb"),a=r[0],o=r[1],s=r[2],i=[mt(a/255),mt(o/255),mt(s/255)],c=i[0],u=i[1],d=i[2],v=bt(.4122214708*c+.5363325363*u+.0514459929*d),m=bt(.2119034982*c+.6806995451*u+.1073969566*d),p=bt(.0883024619*c+.2817188376*u+.6299787005*d);return[.2104542553*v+.793617785*m-.0040720468*p,1.9779984951*v-2.428592205*m+.4505937099*p,.0259040371*v+.7827717662*m-.808675766*p]},Tr=ns;function mt(e){var t=Math.abs(e);return t<.04045?e/12.92:(as(e)||1)*rs((t+.055)/1.055,2.4)}var is=b.unpack,He=Math.pow,os=Math.sign,ss=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=is(e,"lab");var r=e[0],a=e[1],o=e[2],s=He(r+.3963377774*a+.2158037573*o,3),i=He(r-.1055613458*a-.0638541728*o,3),c=He(r-.0894841775*a-1.291485548*o,3);return[255*yt(4.0767416621*s-3.3077115913*i+.2309699292*c),255*yt(-1.2684380046*s+2.6097574011*i-.3413193965*c),255*yt(-.0041960863*s-.7034186147*i+1.707614701*c),e.length>3?e[3]:1]},Dr=ss;function yt(e){var t=Math.abs(e);return t>.0031308?(os(e)||1)*(1.055*He(t,1/2.4)-.055):e*12.92}var ls=b.unpack,cs=b.type,hs=L,zr=P,Hr=U,us=Tr;zr.prototype.oklab=function(){return us(this._rgb)},hs.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(zr,[null].concat(e,["oklab"])))},Hr.format.oklab=Dr,Hr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ls(e,"oklab"),cs(e)==="array"&&e.length===3)return"oklab"}});var fs=b.unpack,ds=Tr,vs=wr,ps=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=fs(e,"rgb"),a=r[0],o=r[1],s=r[2],i=ds(a,o,s),c=i[0],u=i[1],d=i[2];return vs(c,u,d)},gs=ps,bs=b.unpack,ms=_r,ys=Dr,ws=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e=bs(e,"lch");var r=e[0],a=e[1],o=e[2],s=ms(r,a,o),i=s[0],c=s[1],u=s[2],d=ys(i,c,u),v=d[0],m=d[1],p=d[2];return[v,m,p,e.length>3?e[3]:1]},_s=ws,$s=b.unpack,ks=b.type,Ps=L,Rr=P,Lr=U,Ns=gs;Rr.prototype.oklch=function(){return Ns(this._rgb)},Ps.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Rr,[null].concat(e,["oklch"])))},Lr.format.oklch=_s,Lr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=$s(e,"oklch"),ks(e)==="array"&&e.length===3)return"oklch"}});var Gr=P,Ms=b.type;Gr.prototype.alpha=function(e,t){return t===void 0&&(t=!1),e!==void 0&&Ms(e)==="number"?t?(this._rgb[3]=e,this):new Gr([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};var Cs=P;Cs.prototype.clipped=function(){return this._rgb._clipped||!1};var ue=P,xs=Fe;ue.prototype.darken=function(e){e===void 0&&(e=1);var t=this,r=t.lab();return r[0]-=xs.Kn*e,new ue(r,"lab").alpha(t.alpha(),!0)},ue.prototype.brighten=function(e){return e===void 0&&(e=1),this.darken(-e)},ue.prototype.darker=ue.prototype.darken,ue.prototype.brighter=ue.prototype.brighten;var Es=P;Es.prototype.get=function(e){var t=e.split("."),r=t[0],a=t[1],o=this[r]();if(a){var s=r.indexOf(a)-(r.substr(0,2)==="ok"?2:0);if(s>-1)return o[s];throw new Error("unknown channel "+a+" in mode "+r)}else return o};var me=P,As=b.type,Bs=Math.pow,Ss=1e-7,Fs=20;me.prototype.luminance=function(e){if(e!==void 0&&As(e)==="number"){if(e===0)return new me([0,0,0,this._rgb[3]],"rgb");if(e===1)return new me([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),r="rgb",a=Fs,o=function(i,c){var u=i.interpolate(c,.5,r),d=u.luminance();return Math.abs(e-d)<Ss||!a--?u:d>e?o(i,u):o(u,c)},s=(t>e?o(new me([0,0,0]),this):o(this,new me([255,255,255]))).rgb();return new me(s.concat([this._rgb[3]]))}return Ts.apply(void 0,this._rgb.slice(0,3))};var Ts=function(e,t,r){return e=wt(e),t=wt(t),r=wt(r),.2126*e+.7152*t+.0722*r},wt=function(e){return e/=255,e<=.03928?e/12.92:Bs((e+.055)/1.055,2.4)},Q={},Or=P,Ur=b.type,Re=Q,qr=function(e,t,r){r===void 0&&(r=.5);for(var a=[],o=arguments.length-3;o-- >0;)a[o]=arguments[o+3];var s=a[0]||"lrgb";if(!Re[s]&&!a.length&&(s=Object.keys(Re)[0]),!Re[s])throw new Error("interpolation mode "+s+" is not defined");return Ur(e)!=="object"&&(e=new Or(e)),Ur(t)!=="object"&&(t=new Or(t)),Re[s](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))},Ir=P,Ds=qr;Ir.prototype.mix=Ir.prototype.interpolate=function(e,t){t===void 0&&(t=.5);for(var r=[],a=arguments.length-2;a-- >0;)r[a]=arguments[a+2];return Ds.apply(void 0,[this,e,t].concat(r))};var Wr=P;Wr.prototype.premultiply=function(e){e===void 0&&(e=!1);var t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new Wr([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};var _t=P,zs=Fe;_t.prototype.saturate=function(e){e===void 0&&(e=1);var t=this,r=t.lch();return r[1]+=zs.Kn*e,r[1]<0&&(r[1]=0),new _t(r,"lch").alpha(t.alpha(),!0)},_t.prototype.desaturate=function(e){return e===void 0&&(e=1),this.saturate(-e)};var Zr=P,Vr=b.type;Zr.prototype.set=function(e,t,r){r===void 0&&(r=!1);var a=e.split("."),o=a[0],s=a[1],i=this[o]();if(s){var c=o.indexOf(s)-(o.substr(0,2)==="ok"?2:0);if(c>-1){if(Vr(t)=="string")switch(t.charAt(0)){case"+":i[c]+=+t;break;case"-":i[c]+=+t;break;case"*":i[c]*=+t.substr(1);break;case"/":i[c]/=+t.substr(1);break;default:i[c]=+t}else if(Vr(t)==="number")i[c]=t;else throw new Error("unsupported value for Color.set");var u=new Zr(i,o);return r?(this._rgb=u._rgb,this):u}throw new Error("unknown channel "+s+" in mode "+o)}else return i};var Hs=P,Rs=function(e,t,r){var a=e._rgb,o=t._rgb;return new Hs(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),"rgb")};Q.rgb=Rs;var Ls=P,$t=Math.sqrt,ye=Math.pow,Gs=function(e,t,r){var a=e._rgb,o=a[0],s=a[1],i=a[2],c=t._rgb,u=c[0],d=c[1],v=c[2];return new Ls($t(ye(o,2)*(1-r)+ye(u,2)*r),$t(ye(s,2)*(1-r)+ye(d,2)*r),$t(ye(i,2)*(1-r)+ye(v,2)*r),"rgb")};Q.lrgb=Gs;var Os=P,Us=function(e,t,r){var a=e.lab(),o=t.lab();return new Os(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),"lab")};Q.lab=Us;var Yr=P,we=function(e,t,r,a){var o,s,i,c;a==="hsl"?(i=e.hsl(),c=t.hsl()):a==="hsv"?(i=e.hsv(),c=t.hsv()):a==="hcg"?(i=e.hcg(),c=t.hcg()):a==="hsi"?(i=e.hsi(),c=t.hsi()):a==="lch"||a==="hcl"?(a="hcl",i=e.hcl(),c=t.hcl()):a==="oklch"&&(i=e.oklch().reverse(),c=t.oklch().reverse());var u,d,v,m,p,w;(a.substr(0,1)==="h"||a==="oklch")&&(o=i,u=o[0],v=o[1],p=o[2],s=c,d=s[0],m=s[1],w=s[2]);var y,N,x,A;return!isNaN(u)&&!isNaN(d)?(d>u&&d-u>180?A=d-(u+360):d<u&&u-d>180?A=d+360-u:A=d-u,N=u+r*A):isNaN(u)?isNaN(d)?N=Number.NaN:(N=d,(p==1||p==0)&&a!="hsv"&&(y=m)):(N=u,(w==1||w==0)&&a!="hsv"&&(y=v)),y===void 0&&(y=v+r*(m-v)),x=p+r*(w-p),a==="oklch"?new Yr([x,y,N],a):new Yr([N,y,x],a)},qs=we,jr=function(e,t,r){return qs(e,t,r,"lch")};Q.lch=jr,Q.hcl=jr;var Is=P,Ws=function(e,t,r){var a=e.num(),o=t.num();return new Is(a+r*(o-a),"num")};Q.num=Ws;var Zs=we,Vs=function(e,t,r){return Zs(e,t,r,"hcg")};Q.hcg=Vs;var Ys=we,js=function(e,t,r){return Ys(e,t,r,"hsi")};Q.hsi=js;var Xs=we,Qs=function(e,t,r){return Xs(e,t,r,"hsl")};Q.hsl=Qs;var Js=we,Ks=function(e,t,r){return Js(e,t,r,"hsv")};Q.hsv=Ks;var el=P,tl=function(e,t,r){var a=e.oklab(),o=t.oklab();return new el(a[0]+r*(o[0]-a[0]),a[1]+r*(o[1]-a[1]),a[2]+r*(o[2]-a[2]),"oklab")};Q.oklab=tl;var rl=we,al=function(e,t,r){return rl(e,t,r,"oklch")};Q.oklch=al;var kt=P,nl=b.clip_rgb,Pt=Math.pow,Nt=Math.sqrt,Mt=Math.PI,Xr=Math.cos,Qr=Math.sin,il=Math.atan2,ol=function(e,t,r){t===void 0&&(t="lrgb"),r===void 0&&(r=null);var a=e.length;r||(r=Array.from(new Array(a)).map(function(){return 1}));var o=a/r.reduce(function(N,x){return N+x});if(r.forEach(function(N,x){r[x]*=o}),e=e.map(function(N){return new kt(N)}),t==="lrgb")return sl(e,r);for(var s=e.shift(),i=s.get(t),c=[],u=0,d=0,v=0;v<i.length;v++)if(i[v]=(i[v]||0)*r[0],c.push(isNaN(i[v])?0:r[0]),t.charAt(v)==="h"&&!isNaN(i[v])){var m=i[v]/180*Mt;u+=Xr(m)*r[0],d+=Qr(m)*r[0]}var p=s.alpha()*r[0];e.forEach(function(N,x){var A=N.get(t);p+=N.alpha()*r[x+1];for(var S=0;S<i.length;S++)if(!isNaN(A[S]))if(c[S]+=r[x+1],t.charAt(S)==="h"){var Z=A[S]/180*Mt;u+=Xr(Z)*r[x+1],d+=Qr(Z)*r[x+1]}else i[S]+=A[S]*r[x+1]});for(var w=0;w<i.length;w++)if(t.charAt(w)==="h"){for(var y=il(d/c[w],u/c[w])/Mt*180;y<0;)y+=360;for(;y>=360;)y-=360;i[w]=y}else i[w]=i[w]/c[w];return p/=a,new kt(i,t).alpha(p>.99999?1:p,!0)},sl=function(e,t){for(var r=e.length,a=[0,0,0,0],o=0;o<e.length;o++){var s=e[o],i=t[o]/r,c=s._rgb;a[0]+=Pt(c[0],2)*i,a[1]+=Pt(c[1],2)*i,a[2]+=Pt(c[2],2)*i,a[3]+=c[3]*i}return a[0]=Nt(a[0]),a[1]=Nt(a[1]),a[2]=Nt(a[2]),a[3]>.9999999&&(a[3]=1),new kt(nl(a))},K=L,_e=b.type,ll=Math.pow,Ct=function(e){var t="rgb",r=K("#ccc"),a=0,o=[0,1],s=[],i=[0,0],c=!1,u=[],d=!1,v=0,m=1,p=!1,w={},y=!0,N=1,x=function(g){if(g=g||["#fff","#000"],g&&_e(g)==="string"&&K.brewer&&K.brewer[g.toLowerCase()]&&(g=K.brewer[g.toLowerCase()]),_e(g)==="array"){g.length===1&&(g=[g[0],g[0]]),g=g.slice(0);for(var $=0;$<g.length;$++)g[$]=K(g[$]);s.length=0;for(var C=0;C<g.length;C++)s.push(C/(g.length-1))}return X(),u=g},A=function(g){if(c!=null){for(var $=c.length-1,C=0;C<$&&g>=c[C];)C++;return C-1}return 0},S=function(g){return g},Z=function(g){return g},I=function(g,$){var C,M;if($==null&&($=!1),isNaN(g)||g===null)return r;if($)M=g;else if(c&&c.length>2){var V=A(g);M=V/(c.length-2)}else m!==v?M=(g-v)/(m-v):M=1;M=Z(M),$||(M=S(M)),N!==1&&(M=ll(M,N)),M=i[0]+M*(1-i[0]-i[1]),M=Math.min(1,Math.max(0,M));var z=Math.floor(M*1e4);if(y&&w[z])C=w[z];else{if(_e(u)==="array")for(var B=0;B<s.length;B++){var F=s[B];if(M<=F){C=u[B];break}if(M>=F&&B===s.length-1){C=u[B];break}if(M>F&&M<s[B+1]){M=(M-F)/(s[B+1]-F),C=K.interpolate(u[B],u[B+1],M,t);break}}else _e(u)==="function"&&(C=u(M));y&&(w[z]=C)}return C},X=function(){return w={}};x(e);var E=function(g){var $=K(I(g));return d&&$[d]?$[d]():$};return E.classes=function(g){if(g!=null){if(_e(g)==="array")c=g,o=[g[0],g[g.length-1]];else{var $=K.analyze(o);g===0?c=[$.min,$.max]:c=K.limits($,"e",g)}return E}return c},E.domain=function(g){if(!arguments.length)return o;v=g[0],m=g[g.length-1],s=[];var $=u.length;if(g.length===$&&v!==m)for(var C=0,M=Array.from(g);C<M.length;C+=1){var V=M[C];s.push((V-v)/(m-v))}else{for(var z=0;z<$;z++)s.push(z/($-1));if(g.length>2){var B=g.map(function(T,D){return D/(g.length-1)}),F=g.map(function(T){return(T-v)/(m-v)});F.every(function(T,D){return B[D]===T})||(Z=function(T){if(T<=0||T>=1)return T;for(var D=0;T>=F[D+1];)D++;var te=(T-F[D])/(F[D+1]-F[D]),se=B[D]+te*(B[D+1]-B[D]);return se})}}return o=[v,m],E},E.mode=function(g){return arguments.length?(t=g,X(),E):t},E.range=function(g,$){return x(g),E},E.out=function(g){return d=g,E},E.spread=function(g){return arguments.length?(a=g,E):a},E.correctLightness=function(g){return g==null&&(g=!0),p=g,X(),p?S=function($){for(var C=I(0,!0).lab()[0],M=I(1,!0).lab()[0],V=C>M,z=I($,!0).lab()[0],B=C+(M-C)*$,F=z-B,T=0,D=1,te=20;Math.abs(F)>.01&&te-- >0;)(function(){return V&&(F*=-1),F<0?(T=$,$+=(D-$)*.5):(D=$,$+=(T-$)*.5),z=I($,!0).lab()[0],F=z-B})();return $}:S=function($){return $},E},E.padding=function(g){return g!=null?(_e(g)==="number"&&(g=[g,g]),i=g,E):i},E.colors=function(g,$){arguments.length<2&&($="hex");var C=[];if(arguments.length===0)C=u.slice(0);else if(g===1)C=[E(.5)];else if(g>1){var M=o[0],V=o[1]-M;C=cl(0,g,!1).map(function(D){return E(M+D/(g-1)*V)})}else{e=[];var z=[];if(c&&c.length>2)for(var B=1,F=c.length,T=1<=F;T?B<F:B>F;T?B++:B--)z.push((c[B-1]+c[B])*.5);else z=o;C=z.map(function(D){return E(D)})}return K[$]&&(C=C.map(function(D){return D[$]()})),C},E.cache=function(g){return g!=null?(y=g,E):y},E.gamma=function(g){return g!=null?(N=g,E):N},E.nodata=function(g){return g!=null?(r=K(g),E):r},E};function cl(e,t,r){for(var a=[],o=e<t,s=r?o?t+1:t-1:t,i=e;o?i<s:i>s;o?i++:i--)a.push(i);return a}var Ce=P,hl=Ct,ul=function(e){for(var t=[1,1],r=1;r<e;r++){for(var a=[1],o=1;o<=t.length;o++)a[o]=(t[o]||0)+t[o-1];t=a}return t},fl=function(e){var t,r,a,o,s,i,c;if(e=e.map(function(p){return new Ce(p)}),e.length===2)t=e.map(function(p){return p.lab()}),s=t[0],i=t[1],o=function(p){var w=[0,1,2].map(function(y){return s[y]+p*(i[y]-s[y])});return new Ce(w,"lab")};else if(e.length===3)r=e.map(function(p){return p.lab()}),s=r[0],i=r[1],c=r[2],o=function(p){var w=[0,1,2].map(function(y){return(1-p)*(1-p)*s[y]+2*(1-p)*p*i[y]+p*p*c[y]});return new Ce(w,"lab")};else if(e.length===4){var u;a=e.map(function(p){return p.lab()}),s=a[0],i=a[1],c=a[2],u=a[3],o=function(p){var w=[0,1,2].map(function(y){return(1-p)*(1-p)*(1-p)*s[y]+3*(1-p)*(1-p)*p*i[y]+3*(1-p)*p*p*c[y]+p*p*p*u[y]});return new Ce(w,"lab")}}else if(e.length>=5){var d,v,m;d=e.map(function(p){return p.lab()}),m=e.length-1,v=ul(m),o=function(p){var w=1-p,y=[0,1,2].map(function(N){return d.reduce(function(x,A,S){return x+v[S]*Math.pow(w,m-S)*Math.pow(p,S)*A[N]},0)});return new Ce(y,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return o},dl=function(e){var t=fl(e);return t.scale=function(){return hl(t)},t},xt=L,ee=function(e,t,r){if(!ee[r])throw new Error("unknown blend mode "+r);return ee[r](e,t)},ie=function(e){return function(t,r){var a=xt(r).rgb(),o=xt(t).rgb();return xt.rgb(e(a,o))}},oe=function(e){return function(t,r){var a=[];return a[0]=e(t[0],r[0]),a[1]=e(t[1],r[1]),a[2]=e(t[2],r[2]),a}},vl=function(e){return e},pl=function(e,t){return e*t/255},gl=function(e,t){return e>t?t:e},bl=function(e,t){return e>t?e:t},ml=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},yl=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},wl=function(e,t){return 255*(1-(1-t/255)/(e/255))},_l=function(e,t){return e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e)};ee.normal=ie(oe(vl)),ee.multiply=ie(oe(pl)),ee.screen=ie(oe(ml)),ee.overlay=ie(oe(yl)),ee.darken=ie(oe(gl)),ee.lighten=ie(oe(bl)),ee.dodge=ie(oe(_l)),ee.burn=ie(oe(wl));for(var $l=ee,Et=b.type,kl=b.clip_rgb,Pl=b.TWOPI,Nl=Math.pow,Ml=Math.sin,Cl=Math.cos,Jr=L,xl=function(e,t,r,a,o){e===void 0&&(e=300),t===void 0&&(t=-1.5),r===void 0&&(r=1),a===void 0&&(a=1),o===void 0&&(o=[0,1]);var s=0,i;Et(o)==="array"?i=o[1]-o[0]:(i=0,o=[o,o]);var c=function(u){var d=Pl*((e+120)/360+t*u),v=Nl(o[0]+i*u,a),m=s!==0?r[0]+u*s:r,p=m*v*(1-v)/2,w=Cl(d),y=Ml(d),N=v+p*(-.14861*w+1.78277*y),x=v+p*(-.29227*w-.90649*y),A=v+p*(1.97294*w);return Jr(kl([N*255,x*255,A*255,1]))};return c.start=function(u){return u==null?e:(e=u,c)},c.rotations=function(u){return u==null?t:(t=u,c)},c.gamma=function(u){return u==null?a:(a=u,c)},c.hue=function(u){return u==null?r:(r=u,Et(r)==="array"?(s=r[1]-r[0],s===0&&(r=r[1])):s=0,c)},c.lightness=function(u){return u==null?o:(Et(u)==="array"?(o=u,i=u[1]-u[0]):(o=[u,u],i=0),c)},c.scale=function(){return Jr.scale(c)},c.hue(r),c},El=P,Al="0123456789abcdef",Bl=Math.floor,Sl=Math.random,Fl=function(){for(var e="#",t=0;t<6;t++)e+=Al.charAt(Bl(Sl()*16));return new El(e,"hex")},At=Ae,Kr=Math.log,Tl=Math.pow,Dl=Math.floor,zl=Math.abs,ea=function(e,t){t===void 0&&(t=null);var r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return At(e)==="object"&&(e=Object.values(e)),e.forEach(function(a){t&&At(a)==="object"&&(a=a[t]),a!=null&&!isNaN(a)&&(r.values.push(a),r.sum+=a,a<r.min&&(r.min=a),a>r.max&&(r.max=a),r.count+=1)}),r.domain=[r.min,r.max],r.limits=function(a,o){return ta(r,a,o)},r},ta=function(e,t,r){t===void 0&&(t="equal"),r===void 0&&(r=7),At(e)=="array"&&(e=ea(e));var a=e.min,o=e.max,s=e.values.sort(function(St,Ft){return St-Ft});if(r===1)return[a,o];var i=[];if(t.substr(0,1)==="c"&&(i.push(a),i.push(o)),t.substr(0,1)==="e"){i.push(a);for(var c=1;c<r;c++)i.push(a+c/r*(o-a));i.push(o)}else if(t.substr(0,1)==="l"){if(a<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*Kr(a),d=Math.LOG10E*Kr(o);i.push(a);for(var v=1;v<r;v++)i.push(Tl(10,u+v/r*(d-u)));i.push(o)}else if(t.substr(0,1)==="q"){i.push(a);for(var m=1;m<r;m++){var p=(s.length-1)*m/r,w=Dl(p);if(w===p)i.push(s[w]);else{var y=p-w;i.push(s[w]*(1-y)+s[w+1]*y)}}i.push(o)}else if(t.substr(0,1)==="k"){var N,x=s.length,A=new Array(x),S=new Array(r),Z=!0,I=0,X=null;X=[],X.push(a);for(var E=1;E<r;E++)X.push(a+E/r*(o-a));for(X.push(o);Z;){for(var g=0;g<r;g++)S[g]=0;for(var $=0;$<x;$++)for(var C=s[$],M=Number.MAX_VALUE,V=void 0,z=0;z<r;z++){var B=zl(X[z]-C);B<M&&(M=B,V=z),S[V]++,A[$]=V}for(var F=new Array(r),T=0;T<r;T++)F[T]=null;for(var D=0;D<x;D++)N=A[D],F[N]===null?F[N]=s[D]:F[N]+=s[D];for(var te=0;te<r;te++)F[te]*=1/S[te];Z=!1;for(var se=0;se<r;se++)if(F[se]!==X[se]){Z=!0;break}X=F,I++,I>200&&(Z=!1)}for(var le={},$e=0;$e<r;$e++)le[$e]=[];for(var ke=0;ke<x;ke++)N=A[ke],le[N].push(s[ke]);for(var ae=[],fe=0;fe<r;fe++)ae.push(le[fe][0]),ae.push(le[fe][le[fe].length-1]);ae=ae.sort(function(St,Ft){return St-Ft}),i.push(ae[0]);for(var xe=1;xe<ae.length;xe+=2){var de=ae[xe];!isNaN(de)&&i.indexOf(de)===-1&&i.push(de)}}return i},ra={analyze:ea,limits:ta},aa=P,Hl=function(e,t){e=new aa(e),t=new aa(t);var r=e.luminance(),a=t.luminance();return r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)},na=P,re=Math.sqrt,G=Math.pow,Rl=Math.min,Ll=Math.max,ia=Math.atan2,oa=Math.abs,Le=Math.cos,sa=Math.sin,Gl=Math.exp,la=Math.PI,Ol=function(e,t,r,a,o){r===void 0&&(r=1),a===void 0&&(a=1),o===void 0&&(o=1);var s=function(de){return 360*de/(2*la)},i=function(de){return 2*la*de/360};e=new na(e),t=new na(t);var c=Array.from(e.lab()),u=c[0],d=c[1],v=c[2],m=Array.from(t.lab()),p=m[0],w=m[1],y=m[2],N=(u+p)/2,x=re(G(d,2)+G(v,2)),A=re(G(w,2)+G(y,2)),S=(x+A)/2,Z=.5*(1-re(G(S,7)/(G(S,7)+G(25,7)))),I=d*(1+Z),X=w*(1+Z),E=re(G(I,2)+G(v,2)),g=re(G(X,2)+G(y,2)),$=(E+g)/2,C=s(ia(v,I)),M=s(ia(y,X)),V=C>=0?C:C+360,z=M>=0?M:M+360,B=oa(V-z)>180?(V+z+360)/2:(V+z)/2,F=1-.17*Le(i(B-30))+.24*Le(i(2*B))+.32*Le(i(3*B+6))-.2*Le(i(4*B-63)),T=z-V;T=oa(T)<=180?T:z<=V?T+360:T-360,T=2*re(E*g)*sa(i(T)/2);var D=p-u,te=g-E,se=1+.015*G(N-50,2)/re(20+G(N-50,2)),le=1+.045*$,$e=1+.015*$*F,ke=30*Gl(-G((B-275)/25,2)),ae=2*re(G($,7)/(G($,7)+G(25,7))),fe=-ae*sa(2*i(ke)),xe=re(G(D/(r*se),2)+G(te/(a*le),2)+G(T/(o*$e),2)+fe*(te/(a*le))*(T/(o*$e)));return Ll(0,Rl(100,xe))},ca=P,Ul=function(e,t,r){r===void 0&&(r="lab"),e=new ca(e),t=new ca(t);var a=e.get(r),o=t.get(r),s=0;for(var i in a){var c=(a[i]||0)-(o[i]||0);s+=c*c}return Math.sqrt(s)},ql=P,Il=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(ql,[null].concat(e))),!0}catch{return!1}},ha=L,ua=Ct,Wl={cool:function(){return ua([ha.hsl(180,1,.9),ha.hsl(250,.7,.4)])},hot:function(){return ua(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Ge={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Bt=0,fa=Object.keys(Ge);Bt<fa.length;Bt+=1){var da=fa[Bt];Ge[da.toLowerCase()]=Ge[da]}var Zl=Ge,q=L;q.average=ol,q.bezier=dl,q.blend=$l,q.cubehelix=xl,q.mix=q.interpolate=qr,q.random=Fl,q.scale=Ct,q.analyze=ra.analyze,q.contrast=Hl,q.deltaE=Ol,q.distance=Ul,q.limits=ra.limits,q.valid=Il,q.scales=Wl,q.colors=Nr,q.brewer=Zl;var Vl=q;return Vl})})(gn);var uc=gn.exports;const fc=tc(uc);class dc{constructor(){this.clip=null,this.xZoom=1,this.yZoom=1,this.beatsPerBar=4,this.divisionsPerBeat=2,this.snapStrength=.05,this.noteResizeHandleArea=.2,this.selectedNote=null,this.playheads=[],this._minPitch=0,this._maxPitch=127,this._scale=j.ScaleTemplate.major.create("C"),this._filterPitchesByScale=!1,this._pitchesCache=null,this.noteColor=this._defaultNoteColor,this.canAddNote=n=>!0,this.canEditNoteStart=n=>!0,this.canEditNoteEnd=n=>!0,this.canEditNotePitch=n=>!0,this.canDeleteNote=n=>!0,this._defaultNoteColors=["#f44336","#e81e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"]}get minPitch(){return this._minPitch}set minPitch(n){n!=this._minPitch&&(this._minPitch=n,this._pitchesCache=null)}get maxPitch(){return this._maxPitch}set maxPitch(n){n!=this._maxPitch&&(this._maxPitch=n,this._pitchesCache=null)}get scale(){return this._scale}set scale(n){n!==this._scale&&(this._scale=n,this._pitchesCache=null)}get filterPitchesByScale(){return this._filterPitchesByScale}set filterPitchesByScale(n){n!=this._filterPitchesByScale&&(this._filterPitchesByScale=n,this._pitchesCache=null)}get pitches(){if(this._pitchesCache==null){const n=[];for(let h=this.maxPitch;h>=this.minPitch;h--)(!this.filterPitchesByScale||this.scale.contains(h))&&n.push(h);this._pitchesCache=n}return this._pitchesCache}get beatWidth(){return 100*this.xZoom}set beatWidth(n){this.xZoom=n/100}get pitchHeight(){return 20*this.yZoom}set pitchHeight(n){this.yZoom=n/20}get clipBeats(){var n;return((n=this.clip)==null?void 0:n.duration)??0}get beatsPerDivision(){return 1/this.divisionsPerBeat}get totalWidth(){return this.clip?this.clipBeats*this.beatWidth:0}set totalWidth(n){!this.clip||this.clip.duration<=0||(this.beatWidth=n/this.clipBeats)}get totalHeight(){return this.clip?this.pitches.length*this.pitchHeight:0}set totalHeight(n){this.clip&&(this.pitchHeight=n/this.pitches.length)}pitchIsBlack(n){const h=n%12;return h==1||h==3||h==6||h==8||h==10}getXFromBeat(n){return n*this.beatWidth}getBeatFromX(n){var h;return Math.min(((h=this.clip)==null?void 0:h.duration)??0,Math.max(0,n/this.beatWidth))}getYFromPitch(n){return this.pitches.indexOf(n)*this.pitchHeight}getPitchFromY(n){const h=Math.floor(n/this.pitchHeight);return h<0||h>=this.pitches.length?0:Math.min(127,Math.max(0,this.pitches[h]))}getBeatLines(){const n=[{beat:0,class:"bar-line"}];for(let f=0;f<this.beatsPerBar;f++){f>0&&n.push({beat:f,class:"beat-line"});for(let _=1;_<this.divisionsPerBeat;_++)n.push({beat:f+_/this.divisionsPerBeat,class:"division-line"})}const h=[];for(let f=0;f<this.clipBeats;f+=this.beatsPerBar)for(const _ of n){const k=f+_.beat;k>=0&&k<=this.clipBeats&&h.push({beat:k,class:_.class})}return h}getNoteAt(n,h){return this.clip?this.clip.notes.find(f=>f.pitch==h&&f.contains(n))??null:null}getNearestDivisionBeat(n){return Math.round(n*this.divisionsPerBeat)/this.divisionsPerBeat}getPreviousDivisionBeat(n){return Math.floor(n*this.divisionsPerBeat)/this.divisionsPerBeat}getNextDivisionBeat(n){return Math.ceil(n*this.divisionsPerBeat)/this.divisionsPerBeat}getSnappedBeat(n){const h=this.getNearestDivisionBeat(n);return Math.abs(n-h)<=this.beatsPerDivision*this.snapStrength?h:n}_defaultNoteColor(n,h){let f=fc(this._defaultNoteColors[n.channel%16]);return h&&(f=f.brighten(.4)),typeof n.velocity=="number"?f=f.alpha((n.velocity+128)/255):f=f.alpha(.75),f.hex()}}const Y={none:0,noteCreation:1,noteStart:2,noteEnd:4,pitch:8};class vc{constructor(n,h){this._dragMode=Y.none,this._dragOffset=0,this._clipEditor=n,this._viewModel=h}onMouseDown(n,h){const f=this._viewModel;if(!f.clip)return;const _=f.getBeatFromX(n.x),k=f.getPitchFromY(n.y),W=f.getNoteAt(_,k);h==1&&W?this._removeNote(W):h==0&&(W?this._beginNoteDrag(W,_):this._addNewNote(_,k))}onDoubleClick(n){this.onMouseDown(n,1)}onMouseMove(n){const h=this._viewModel;if(!h.selectedNote||this._dragMode==Y.none)return;const f=(this._dragMode&Y.noteCreation)>0,_=(this._dragMode&Y.noteStart)>0,k=(this._dragMode&Y.noteEnd)>0,W=(this._dragMode&Y.pitch)>0,ne=h.getSnappedBeat(h.getBeatFromX(n.x)-this._dragOffset);if(_&&k)h.selectedNote.start=ne;else if(_){if(ne<h.selectedNote.end){const ce=h.selectedNote.end;h.selectedNote.start=ne,h.selectedNote.end=ce}}else if(k)ne>h.selectedNote.start&&(h.selectedNote.end=ne);else if(f){const ce=h.getNextDivisionBeat(h.getBeatFromX(n.x));ce>h.selectedNote.start&&(h.selectedNote.end=ce)}W&&(h.selectedNote.pitch=h.getPitchFromY(n.y)),this._clipEditor.requestUpdate()}onMouseUp(n,h){const f=this._viewModel;h==0&&(this._dragMode=Y.none,f.clip&&f.selectedNote&&f.selectedNote.duration<=0&&(f.clip.notes=f.clip.notes.filter(_=>_!==f.selectedNote)),f.selectedNote=null,this._clipEditor.requestUpdate())}onMouseLeave(n,h){this.onMouseUp(n,0)}_addNewNote(n,h){var k;const f=this._viewModel,_=new j.ClipNote(f.getPreviousDivisionBeat(n),f.beatsPerDivision,h,80);f.canAddNote(_)&&((k=f.clip)==null||k.notes.push(_),f.selectedNote=_,this._dragMode=Y.noteCreation,this._clipEditor.requestUpdate())}_removeNote(n){const h=this._viewModel;h.clip&&h.canDeleteNote(n)&&(h.clip.notes=h.clip.notes.filter(f=>f!==n),h.selectedNote=null,this._dragMode=Y.none,this._clipEditor.requestUpdate())}_beginNoteDrag(n,h){const f=this._viewModel;if(!f.clip)return;const _=n.getPercent(h);f.canEditNotePitch(n)&&(this._dragMode=Y.pitch),_<=f.noteResizeHandleArea?f.canEditNoteStart(n)&&(this._dragMode=Y.noteStart):_>=1-f.noteResizeHandleArea?f.canEditNoteEnd(n)&&(this._dragMode=Y.noteEnd):f.canEditNoteStart(n)&&f.canEditNoteEnd(n)&&(this._dragMode+=Y.noteStart+Y.noteEnd),this._dragMode==Y.noteEnd?this._dragOffset=h-n.end:this._dragOffset=h-n.start,f.selectedNote=n,this._clipEditor.requestUpdate()}}class pc{constructor(n,h){this._isFinished=!1,this._finished=new j.ClockChildFinishedEvent,this._clipEditor=n,this._clipPlayer=h}get clipEditor(){return this._clipEditor}get clipPlayer(){return this._clipPlayer}get ref(){return this._ref}set ref(n){this._ref=n}withRef(n){return this._ref=n,this}get isFinished(){return this._isFinished||this._clipPlayer.isFinished}get finished(){return this._finished}update(n){this._clipEditor.markPlayheadsForUpdate()}finish(){this._isFinished=!0,this.finished.trigger(new j.ClockChildFinishedEventData(this))}}var gc=Object.defineProperty,bc=Object.getOwnPropertyDescriptor,R=(l,n,h,f)=>{for(var _=f>1?void 0:f?bc(n,h):n,k=l.length-1,W;k>=0;k--)(W=l[k])&&(_=(f?W(n,h,_):W(_))||_);return f&&_&&gc(n,h,_),_};let H=class extends Xl{constructor(){super(),this._viewModel=new dc,this._highlightedPitch=-1,this._playheadUpdateTicker=0,this._svg=oc(),this._svgPoint=null,this._behavior=new vc(this,this._viewModel)}get clip(){return this._viewModel.clip}set clip(l){const n=this._viewModel.clip;this._viewModel.clip=l,this.requestUpdate("clip",n)}get xZoom(){return this._viewModel.xZoom}set xZoom(l){const n=this._viewModel.xZoom;this._viewModel.xZoom=l,this.requestUpdate("xZoom",n)}get yZoom(){return this._viewModel.yZoom}set yZoom(l){const n=this._viewModel.yZoom;this._viewModel.yZoom=l,this.requestUpdate("yZoom",n)}get width(){return this._viewModel.totalWidth}set width(l){const n=this._viewModel.totalWidth;this._viewModel.totalWidth=l,this.requestUpdate("width",n)}get height(){return this._viewModel.totalHeight}set height(l){const n=this._viewModel.totalHeight;this._viewModel.totalHeight=l,this.requestUpdate("height",n)}get beatsPerBar(){return this._viewModel.beatsPerBar}set beatsPerBar(l){const n=this._viewModel.beatsPerBar;this._viewModel.beatsPerBar=Math.max(1,Math.round(l)),this.requestUpdate("beatsPerBar",n)}get divisionsPerBeat(){return this._viewModel.divisionsPerBeat}set divisionsPerBeat(l){const n=this._viewModel.divisionsPerBeat;this._viewModel.divisionsPerBeat=Math.max(1,Math.round(l)),this.requestUpdate("divisionsPerBeat",n)}get snapStrength(){return this._viewModel.snapStrength}set snapStrength(l){const n=this._viewModel.snapStrength;this._viewModel.snapStrength=Math.min(Math.max(0,l),1),this.requestUpdate("snapStrength",n)}get noteResizeHandleArea(){return this._viewModel.noteResizeHandleArea}set noteResizeHandleArea(l){const n=this._viewModel.noteResizeHandleArea;this._viewModel.noteResizeHandleArea=Math.min(Math.max(0,l),1),this.requestUpdate("noteResizeHandleArea",n)}get minPitch(){return this._viewModel.minPitch}set minPitch(l){const n=this._viewModel.minPitch;if(typeof l=="string")try{l=j.pitch(l)}catch{try{l=Number(l)}catch{return}}this._viewModel.minPitch=Math.max(0,Math.round(l)),this.requestUpdate("minPitch",n)}get maxPitch(){return this._viewModel.maxPitch}set maxPitch(l){const n=this._viewModel.maxPitch;if(typeof l=="string")try{l=j.pitch(l)}catch{try{l=Number(l)}catch{return}}this._viewModel.maxPitch=Math.min(127,Math.round(l)),this.requestUpdate("maxPitch",n)}get scale(){return this._viewModel.scale}set scale(l){const n=this._viewModel.scale;this._viewModel.scale=l,this.requestUpdate("scale",n)}get filterPitchesByScale(){return this._viewModel.filterPitchesByScale}set filterPitchesByScale(l){const n=this._viewModel.filterPitchesByScale;this._viewModel.filterPitchesByScale=l,this.requestUpdate("filterPitchesByScale",n)}get noteColor(){return this._viewModel.noteColor}set noteColor(l){const n=this._viewModel.noteColor;this._viewModel.noteColor=l,this.requestUpdate("noteColor",n)}get canAddNote(){return this._viewModel.canAddNote}set canAddNote(l){const n=this._viewModel.canAddNote;this._viewModel.canAddNote=l,this.requestUpdate("canAddNote",n)}get canEditNoteStart(){return this._viewModel.canEditNoteStart}set canEditNoteStart(l){const n=this._viewModel.canEditNoteStart;this._viewModel.canEditNoteStart=l,this.requestUpdate("canEditNoteStart",n)}get canEditNoteEnd(){return this._viewModel.canEditNoteEnd}set canEditNoteEnd(l){const n=this._viewModel.canEditNoteEnd;this._viewModel.canEditNoteEnd=l,this.requestUpdate("canEditNoteEnd",n)}get canEditNotePitch(){return this._viewModel.canEditNotePitch}set canEditNotePitch(l){const n=this._viewModel.canEditNotePitch;this._viewModel.canEditNotePitch=l,this.requestUpdate("canEditNotePitch",n)}get canDeleteNote(){return this._viewModel.canDeleteNote}set canDeleteNote(l){const n=this._viewModel.canDeleteNote;this._viewModel.canDeleteNote=l,this.requestUpdate("canDeleteNote",n)}_getCursorPoint(l){const n=this._svg.value,h=this._svgPoint;return!h||!n?{x:-1,y:-1}:(h.x=l.clientX,h.y=l.clientY,h.matrixTransform(n.getScreenCTM().inverse()))}_onMouseDown(l){this._behavior.onMouseDown(this._getCursorPoint(l),l.button)}_onMouseMove(l){const n=this._getCursorPoint(l);this._highlightedPitch=this._viewModel.getPitchFromY(n.y),this._behavior.onMouseMove(n)}_onMouseUp(l){this._behavior.onMouseUp(this._getCursorPoint(l),l.button)}_onMouseLeave(l){this._highlightedPitch=-1,this._behavior.onMouseLeave(this._getCursorPoint(l),l.button)}_onDoubleClick(l){this._behavior.onDoubleClick(this._getCursorPoint(l))}addPlayhead(l){if(l.clip!=this.clip)throw Error("Cannot add a playhead for a clip player that's playing a different clip than the one being edited");const n=new pc(this,l);return this._viewModel.playheads.push(n),n}markPlayheadsForUpdate(){this._playheadUpdateTicker=(this._playheadUpdateTicker+1)%1e4}firstUpdated(){const l=this._svg.value;this._svgPoint=l.createSVGPoint()}render(){const l=this._viewModel;return Ql`
            <svg :viewBox="0 0 ${l.totalWidth} ${l.totalHeight}"
                preserveAspectRatio="none" fill="#666666"
                ${lc(this._svg)} class="edit-area"
                @mousedown=${this._onMouseDown}
                @mousemove=${this._onMouseMove}
                @mouseup=${this._onMouseUp}
                @mouseleave=${this._onMouseLeave}
                @dblclick=${this._onDoubleClick}
                width=${l.totalWidth}
                height=${l.totalHeight}>

                <rect x="0" y="0" 
                    width=${l.totalWidth}
                    height=${l.totalHeight}
                    fill="#666"></rect>

                ${this._renderBlackLines()}

                ${this._renderPitchSeparatorLines()}

                ${this._renderBeatLines()}

                ${this._renderPitchNames()}

                ${this._renderNotes()}

                ${this._renderPlayheads()}
            </svg>
        `}_renderBlackLines(){const l=this._viewModel,n=[];for(const h of l.pitches)l.pitchIsBlack(h)&&n.push(Pe`
                    <rect x="0" y=${l.getYFromPitch(h)}
                        width=${l.totalWidth}
                        height=${l.pitchHeight}
                        fill="#555"></rect>
                `);return n}_renderPitchSeparatorLines(){const l=this._viewModel,n=[];if(l.pitches.length==0)return n;let h=l.pitchIsBlack(l.pitches[0]);for(let f=1;f<l.pitches.length;f++){const _=l.pitches[f],k=l.pitchIsBlack(_);h==k&&n.push(Pe`
                    <line x1="0" y1=${f*l.pitchHeight}
                        x2=${l.totalWidth} y2=${f*l.pitchHeight}
                        class="pitch-separator-line"/>
                `),h=k}return n}_renderBeatLines(){const l=this._viewModel,n=[];for(const h of l.getBeatLines())n.push(Pe`
                <line x1=${h.beat*l.beatWidth} y1="0" 
                    x2=${h.beat*l.beatWidth} y2=${l.totalHeight}
                    class=${h.class}/>
            `);return n}_renderPitchNames(){const l=this._viewModel,n=[],h={fontSize:l.pitchHeight-2+"px"};function f(_,k){return Pe`
            <text x=${_.beat*l.beatWidth+2}
                  y=${l.getYFromPitch(k)+l.pitchHeight-l.pitchHeight/5}
                  style=${hc(h)}
                  class="pitch-label">
                ${l.scale.getPitchName(k,!0)}
            </text>`}for(const _ of l.getBeatLines().filter(k=>k.beat==0||k.class=="bar-line")){for(const k of l.pitches.filter(W=>W%12==l.scale.root%12&&W!=this._highlightedPitch))n.push(f(_,k));this._highlightedPitch>=0&&n.push(f(_,this._highlightedPitch))}return n}_renderNotes(){var h;const l=this._viewModel,n=[];for(const f of((h=this.clip)==null?void 0:h.notes)??[])n.push(Pe`
                <rect x=${f.start*l.beatWidth}
                    y=${l.getYFromPitch(f.pitch)}
                    height=${l.pitchHeight}
                    width=${f.duration*l.beatWidth}
                    stroke="black" stroke-width="0.5"
                    fill=${l.noteColor(f,f===l.selectedNote)}></rect>
            `);return n}_renderPlayheads(){const l=this._viewModel,n=[];for(const h of l.playheads){const f=(h.clipPlayer.startBeat+h.clipPlayer.beatsPassed)%this.clip.duration;n.push(Pe`
                <line x1=${f*l.beatWidth} y1="0" 
                    x2=${f*l.beatWidth} y2=${l.totalHeight}
                    class="playhead"/>
            `)}return n}};H.styles=jl`
        .edit-area {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -khtml-user-select: none;
            -ms-user-select: none;
        }

        .bar-line {
            stroke: #303030;
            stroke-width: 2;
            stroke-dasharray: 5,0;
        }

        .beat-line {
            stroke: #E0E0E0;
            stroke-width: 1;
            stroke-dasharray: 5,0;
        }

        .division-line {
            stroke: #A0A0A0;
            stroke-width: 1;
            stroke-dasharray: 2,5;
        }

        .pitch-separator-line {
            stroke: #5E5E5E;
            stroke-width: 1;
        }

        .pitch-label {
            fill: #FFFFFF99;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            font-size: 20px;
        }

        .playhead {
            stroke: #F02222;
            stroke-width: 2;
        }
    `;R([O({attribute:!1})],H.prototype,"clip",1);R([O({attribute:"x-zoom",type:Number})],H.prototype,"xZoom",1);R([O({attribute:"y-zoom",type:Number})],H.prototype,"yZoom",1);R([O({attribute:"width",type:Number})],H.prototype,"width",1);R([O({attribute:"height",type:Number})],H.prototype,"height",1);R([O({attribute:"beats-per-bar",type:Number,reflect:!0})],H.prototype,"beatsPerBar",1);R([O({attribute:"divisions-per-beat",type:Number,reflect:!0})],H.prototype,"divisionsPerBeat",1);R([O({attribute:"snap-strength",type:Number,reflect:!0})],H.prototype,"snapStrength",1);R([O({attribute:"note-resize-handle-area",type:Number,reflect:!0})],H.prototype,"noteResizeHandleArea",1);R([O({attribute:"min-pitch",type:String,reflect:!0})],H.prototype,"minPitch",1);R([O({attribute:"max-pitch",type:String,reflect:!0})],H.prototype,"maxPitch",1);R([O({attribute:!1})],H.prototype,"scale",1);R([O({attribute:"filter-pitches-by-scale",type:Boolean})],H.prototype,"filterPitchesByScale",1);R([O({attribute:!1})],H.prototype,"noteColor",1);R([O({attribute:!1})],H.prototype,"canAddNote",1);R([O({attribute:!1})],H.prototype,"canEditNoteStart",1);R([O({attribute:!1})],H.prototype,"canEditNoteEnd",1);R([O({attribute:!1})],H.prototype,"canEditNotePitch",1);R([O({attribute:!1})],H.prototype,"canDeleteNote",1);R([hn()],H.prototype,"_highlightedPitch",2);R([hn()],H.prototype,"_playheadUpdateTicker",2);H=R([Jl("clip-editor")],H);const Nc={title:"ClipEditor",tags:["autodocs"],render:l=>{const n=new H;for(const h in l)n[h]=l[h];return n},argTypes:{clip:{control:"none",description:"The shimi.Clip object which the ClipEditor will display and enable editing of."},minPitch:{control:{type:"number",min:0,max:127,step:1},description:"The minimum pitch in the piano roll which the ClipEditor will render."},maxPitch:{control:{type:"number",min:0,max:127,step:1},description:"The maximum pitch in the piano roll which the ClipEditor will render."},xZoom:{control:{type:"number",min:.5,max:2,step:.1},description:"Multiplier to be used when rendering x-coordinates in the component."},yZoom:{control:{type:"number",min:.5,max:2,step:.1},description:"Multiplier to be used when rendering y-coordinates in the component."},width:{control:{type:"number",min:100,max:1e3,step:10},description:"Controls the total width of the component."},height:{control:{type:"number",min:100,max:1e3,step:10},description:"Controls the total height of the component."},beatsPerBar:{control:{type:"number",min:1,max:8,step:1},description:"How many beat lines to render before a bar line occurs"},divisionsPerBeat:{control:{type:"number",min:1,max:8,step:1},description:"How many subdivisions to render per beat. These provide a useful visual cue where each beat divides, as well as note snapping."},snapStrength:{control:{type:"number",min:0,max:1,step:.01},description:"How strongly note starts & ends will snap to beat divisions. Default value = 0.05, meaning that given the distance from one beat division to the next, a note start or end must be within 5% of that distance from the division to snap to it."},noteResizeHandleArea:{control:{type:"number",min:0,max:1,step:.01},description:"How much of the note's area can be grabbed to resize it, rather than to move it. The default value = 0.2, meaning if you grab the left-most 20% of a note, you be resizing it from its start. Alternatively if you grab the right-most 20% of a note, you'd be resizing it from its end."},scale:{control:"none",description:"The scale object to use when getting pitch names."},filterPitchesByScale:{control:"boolean",description:"If true, then only pitches which belong to the currently set scale will be rendered. Other pitches, as well as any notes on those pitches, won't be rendered."},noteColor:{control:"none",description:"Function that takes in a shimi.ClipNote object & boolean flag representing whether that note is selected, and returns a string color value."},canAddNote:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if that note would be allowed to be added. If you want to add custom modifications to notes added through the UI, this can also be a good place to do so."},canEditNoteStart:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the start of the note would be allowed to be altered."},canEditNoteEnd:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the end of the note would be allowed to be altered."},canEditNotePitch:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the pitch of the note would be allowed to be altered."},canDeleteNote:{control:"none",description:"Function that takes in a shimi.ClipNote object, and returns true if the note would be allowed to be removed from the clip."}}};function J(){return new j.Clip(8).addNote([0,1],1,"C4",80).addNote([2,3],1,"G4",80).addNote([4,5],1,"A4",80).addNote([6,7],1,"G4",80)}function mc(){return new j.Clip(8).addNote(0,.5,"C4",80,0).addNote(.5,.5,"D4",80,1).addNote(1,.5,"E4",80,2).addNote(1.5,.5,"F4",80,3).addNote(2,.5,"G4",80,4).addNote(2.5,.5,"A4",80,5).addNote(3,.5,"B4",80,6).addNote(3.5,.5,"C5",80,7).addNote(4,.5,"B4",80,8).addNote(4.5,.5,"A4",80,9).addNote(5,.5,"G4",80,10).addNote(5.5,.5,"F4",80,11).addNote(6,.5,"E4",80,12).addNote(6.5,.5,"D4",80,13).addNote(7,1,"C4",80,14)}const Oe={args:{clip:J(),minPitch:55,maxPitch:79}},Ue={args:{}},qe={args:{clip:J(),minPitch:60,maxPitch:72,xZoom:.6,yZoom:1.5}},Ie={args:{clip:J(),minPitch:60,maxPitch:72,width:500,height:500}},We={args:{clip:J(),minPitch:60,maxPitch:72,beatsPerBar:3,divisionsPerBeat:5}},Ze={args:{clip:J(),minPitch:60,maxPitch:72,snapStrength:.5}},Ve={args:{clip:J(),minPitch:60,maxPitch:72,noteResizeHandleArea:0}},Ye={args:{clip:J(),minPitch:55,maxPitch:79,scale:j.ScaleTemplate.major.create("Gb")}},je={args:{clip:J(),minPitch:55,maxPitch:79,scale:j.ScaleTemplate.major.create("G"),filterPitchesByScale:!0}},Xe={args:{clip:mc(),minPitch:60,maxPitch:72}},Qe={args:{clip:new j.Clip(8),minPitch:60,maxPitch:72,canAddNote:l=>l.pitch<67}},Je={args:{clip:J(),minPitch:60,maxPitch:72,canEditNoteStart:l=>l.start<4}},Ke={args:{clip:J(),minPitch:60,maxPitch:72,canEditNoteEnd:l=>l.pitch>65}},et={args:{clip:J(),minPitch:60,maxPitch:72,canEditNotePitch:l=>l.start<4}},tt={args:{clip:J(),minPitch:60,maxPitch:72,canDeleteNote:l=>!1}},rt={args:{clip:J(),minPitch:60,maxPitch:72},play:async({canvasElement:l})=>{const n=l.children.item(0),h=new j.Clock,f=h.addChild(new j.Metronome(120)),_=new j.MidiBus,k=h.addChild(new j.ClipPlayer(n.clip,f,_));k.beatCount=n.clip.duration,h.addChild(n.addPlayhead(k)),h.start()}};var pa,ga,ba;Oe.parameters={...Oe.parameters,docs:{...(pa=Oe.parameters)==null?void 0:pa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 55,
    maxPitch: 79
  }
}`,...(ba=(ga=Oe.parameters)==null?void 0:ga.docs)==null?void 0:ba.source}}};var ma,ya,wa;Ue.parameters={...Ue.parameters,docs:{...(ma=Ue.parameters)==null?void 0:ma.docs,source:{originalSource:`{
  args: {}
}`,...(wa=(ya=Ue.parameters)==null?void 0:ya.docs)==null?void 0:wa.source}}};var _a,$a,ka;qe.parameters={...qe.parameters,docs:{...(_a=qe.parameters)==null?void 0:_a.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    xZoom: 0.6,
    yZoom: 1.5
  }
}`,...(ka=($a=qe.parameters)==null?void 0:$a.docs)==null?void 0:ka.source}}};var Pa,Na,Ma;Ie.parameters={...Ie.parameters,docs:{...(Pa=Ie.parameters)==null?void 0:Pa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    width: 500,
    height: 500
  }
}`,...(Ma=(Na=Ie.parameters)==null?void 0:Na.docs)==null?void 0:Ma.source}}};var Ca,xa,Ea;We.parameters={...We.parameters,docs:{...(Ca=We.parameters)==null?void 0:Ca.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    beatsPerBar: 3,
    divisionsPerBeat: 5
  }
}`,...(Ea=(xa=We.parameters)==null?void 0:xa.docs)==null?void 0:Ea.source}}};var Aa,Ba,Sa;Ze.parameters={...Ze.parameters,docs:{...(Aa=Ze.parameters)==null?void 0:Aa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    snapStrength: 0.5
  }
}`,...(Sa=(Ba=Ze.parameters)==null?void 0:Ba.docs)==null?void 0:Sa.source}}};var Fa,Ta,Da;Ve.parameters={...Ve.parameters,docs:{...(Fa=Ve.parameters)==null?void 0:Fa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    noteResizeHandleArea: 0
  }
}`,...(Da=(Ta=Ve.parameters)==null?void 0:Ta.docs)==null?void 0:Da.source}}};var za,Ha,Ra;Ye.parameters={...Ye.parameters,docs:{...(za=Ye.parameters)==null?void 0:za.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 55,
    maxPitch: 79,
    scale: ScaleTemplate.major.create('Gb')
  }
}`,...(Ra=(Ha=Ye.parameters)==null?void 0:Ha.docs)==null?void 0:Ra.source}}};var La,Ga,Oa;je.parameters={...je.parameters,docs:{...(La=je.parameters)==null?void 0:La.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 55,
    maxPitch: 79,
    scale: ScaleTemplate.major.create('G'),
    filterPitchesByScale: true
  }
}`,...(Oa=(Ga=je.parameters)==null?void 0:Ga.docs)==null?void 0:Oa.source}}};var Ua,qa,Ia;Xe.parameters={...Xe.parameters,docs:{...(Ua=Xe.parameters)==null?void 0:Ua.docs,source:{originalSource:`{
  args: {
    clip: multiChannelClip(),
    minPitch: 60,
    maxPitch: 72
  }
}`,...(Ia=(qa=Xe.parameters)==null?void 0:qa.docs)==null?void 0:Ia.source}}};var Wa,Za,Va;Qe.parameters={...Qe.parameters,docs:{...(Wa=Qe.parameters)==null?void 0:Wa.docs,source:{originalSource:`{
  args: {
    clip: new Clip(8),
    minPitch: 60,
    maxPitch: 72,
    canAddNote: n => n.pitch < 67
  }
}`,...(Va=(Za=Qe.parameters)==null?void 0:Za.docs)==null?void 0:Va.source}}};var Ya,ja,Xa;Je.parameters={...Je.parameters,docs:{...(Ya=Je.parameters)==null?void 0:Ya.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canEditNoteStart: n => n.start < 4
  }
}`,...(Xa=(ja=Je.parameters)==null?void 0:ja.docs)==null?void 0:Xa.source}}};var Qa,Ja,Ka;Ke.parameters={...Ke.parameters,docs:{...(Qa=Ke.parameters)==null?void 0:Qa.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canEditNoteEnd: n => n.pitch > 65
  }
}`,...(Ka=(Ja=Ke.parameters)==null?void 0:Ja.docs)==null?void 0:Ka.source}}};var en,tn,rn;et.parameters={...et.parameters,docs:{...(en=et.parameters)==null?void 0:en.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canEditNotePitch: n => n.start < 4
  }
}`,...(rn=(tn=et.parameters)==null?void 0:tn.docs)==null?void 0:rn.source}}};var an,nn,on;tt.parameters={...tt.parameters,docs:{...(an=tt.parameters)==null?void 0:an.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72,
    canDeleteNote: n => false
  }
}`,...(on=(nn=tt.parameters)==null?void 0:nn.docs)==null?void 0:on.source}}};var sn,ln,cn;rt.parameters={...rt.parameters,docs:{...(sn=rt.parameters)==null?void 0:sn.docs,source:{originalSource:`{
  args: {
    clip: twinkleTwinkle(),
    minPitch: 60,
    maxPitch: 72
  },
  play: async ({
    canvasElement
  }) => {
    const editor = (canvasElement.children.item(0) as ClipEditor);
    const clock = new Clock();
    const metronome = (clock.addChild(new Metronome(120)) as Metronome);
    const midiOut = new MidiBus();
    const clipPlayer = (clock.addChild(new ClipPlayer(editor.clip, metronome, midiOut)) as ClipPlayer);
    clipPlayer.beatCount = editor.clip.duration;
    clock.addChild(editor.addPlayhead(clipPlayer));
    clock.start();
  }
}`,...(cn=(ln=rt.parameters)==null?void 0:ln.docs)==null?void 0:cn.source}}};const Mc=["Primary","NoClip","XAndYZoom","WidthAndHeight","BeatsPerBarAndDivisionsPerBeat","HighSnapStrength","NoNoteResizeHandleArea","WithScaleSet","FilterPitchesByScale","DefaultNoteColoring","CanOnlyAddNotesBelowG4","CanOnlyEditNoteStartBeforeBeat4","CanOnlyEditNoteEndAboveF4","CanOnlyEditNotePitchBeforeBeat4","CantDeleteNotes","Playhead"];export{We as BeatsPerBarAndDivisionsPerBeat,Qe as CanOnlyAddNotesBelowG4,Ke as CanOnlyEditNoteEndAboveF4,et as CanOnlyEditNotePitchBeforeBeat4,Je as CanOnlyEditNoteStartBeforeBeat4,tt as CantDeleteNotes,Xe as DefaultNoteColoring,je as FilterPitchesByScale,Ze as HighSnapStrength,Ue as NoClip,Ve as NoNoteResizeHandleArea,rt as Playhead,Oe as Primary,Ie as WidthAndHeight,Ye as WithScaleSet,qe as XAndYZoom,Mc as __namedExportsOrder,Nc as default};
//# sourceMappingURL=ClipEditor.stories-2fbd084f.js.map
